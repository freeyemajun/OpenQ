<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>小程序 | DiscuzQ 安装文档</title>
    <meta name="generator" content="VuePress 1.9.10">
    <script>
      document.addEventListener("DOMContentLoaded", function(){
        console.log("ready");
        var isChrome = /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);
        if (window.location.hash && isChrome) {
            setTimeout(function () {
                var hash = window.location.hash;
                var element_to_scroll_to = document.getElementById(decodeURI(hash.substr(1)));
                element_to_scroll_to.scrollIntoView();
            }, 300);
        }
      });
</script>
    <meta name="description" content="">
    
    <link rel="preload" href="/docs/assets/css/0.styles.1dac2540.css" as="style"><link rel="preload" href="/docs/assets/js/app.4a94bff3.js" as="script"><link rel="preload" href="/docs/assets/js/2.65b3c0ea.js" as="script"><link rel="preload" href="/docs/assets/js/1.93f47670.js" as="script"><link rel="preload" href="/docs/assets/js/43.c3501ba2.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.e303b1fe.js"><link rel="prefetch" href="/docs/assets/js/11.caa9adf9.js"><link rel="prefetch" href="/docs/assets/js/12.f47f63d5.js"><link rel="prefetch" href="/docs/assets/js/13.93dc81ea.js"><link rel="prefetch" href="/docs/assets/js/14.704d1a26.js"><link rel="prefetch" href="/docs/assets/js/15.2330e6dc.js"><link rel="prefetch" href="/docs/assets/js/16.6aaa40a5.js"><link rel="prefetch" href="/docs/assets/js/17.e32a5229.js"><link rel="prefetch" href="/docs/assets/js/18.1fa05986.js"><link rel="prefetch" href="/docs/assets/js/19.53f57844.js"><link rel="prefetch" href="/docs/assets/js/20.864577f6.js"><link rel="prefetch" href="/docs/assets/js/21.b4e831fa.js"><link rel="prefetch" href="/docs/assets/js/22.243f8c8f.js"><link rel="prefetch" href="/docs/assets/js/23.7addb889.js"><link rel="prefetch" href="/docs/assets/js/24.ef0496a7.js"><link rel="prefetch" href="/docs/assets/js/25.89b549f4.js"><link rel="prefetch" href="/docs/assets/js/26.0a614c82.js"><link rel="prefetch" href="/docs/assets/js/27.c737aa41.js"><link rel="prefetch" href="/docs/assets/js/28.1e6bd7b4.js"><link rel="prefetch" href="/docs/assets/js/29.3f95441b.js"><link rel="prefetch" href="/docs/assets/js/3.640e72c3.js"><link rel="prefetch" href="/docs/assets/js/30.778c4be0.js"><link rel="prefetch" href="/docs/assets/js/31.7bb18d07.js"><link rel="prefetch" href="/docs/assets/js/32.ace851f7.js"><link rel="prefetch" href="/docs/assets/js/33.80a8af0e.js"><link rel="prefetch" href="/docs/assets/js/34.d85fff39.js"><link rel="prefetch" href="/docs/assets/js/35.3adf9801.js"><link rel="prefetch" href="/docs/assets/js/36.9a107e60.js"><link rel="prefetch" href="/docs/assets/js/37.6d5ed231.js"><link rel="prefetch" href="/docs/assets/js/38.d4773946.js"><link rel="prefetch" href="/docs/assets/js/39.1f25f111.js"><link rel="prefetch" href="/docs/assets/js/4.6fcba847.js"><link rel="prefetch" href="/docs/assets/js/40.a7c7edfd.js"><link rel="prefetch" href="/docs/assets/js/41.6c906a58.js"><link rel="prefetch" href="/docs/assets/js/42.19af8c9b.js"><link rel="prefetch" href="/docs/assets/js/44.095b6352.js"><link rel="prefetch" href="/docs/assets/js/45.f712c735.js"><link rel="prefetch" href="/docs/assets/js/46.ea4a5f90.js"><link rel="prefetch" href="/docs/assets/js/47.4c923c28.js"><link rel="prefetch" href="/docs/assets/js/48.a2893909.js"><link rel="prefetch" href="/docs/assets/js/49.4c0fc68d.js"><link rel="prefetch" href="/docs/assets/js/5.5755b19e.js"><link rel="prefetch" href="/docs/assets/js/50.a768c789.js"><link rel="prefetch" href="/docs/assets/js/51.9145a08d.js"><link rel="prefetch" href="/docs/assets/js/52.bea51864.js"><link rel="prefetch" href="/docs/assets/js/53.d24412c9.js"><link rel="prefetch" href="/docs/assets/js/54.cd9f37d4.js"><link rel="prefetch" href="/docs/assets/js/55.a856d50b.js"><link rel="prefetch" href="/docs/assets/js/56.b3072981.js"><link rel="prefetch" href="/docs/assets/js/57.e9c27eb6.js"><link rel="prefetch" href="/docs/assets/js/58.a94f49c6.js"><link rel="prefetch" href="/docs/assets/js/59.76707aea.js"><link rel="prefetch" href="/docs/assets/js/6.c1859e2f.js"><link rel="prefetch" href="/docs/assets/js/60.79251db4.js"><link rel="prefetch" href="/docs/assets/js/61.742230c8.js"><link rel="prefetch" href="/docs/assets/js/62.ca1bb933.js"><link rel="prefetch" href="/docs/assets/js/63.75830b2e.js"><link rel="prefetch" href="/docs/assets/js/64.243cb0d7.js"><link rel="prefetch" href="/docs/assets/js/7.d29ddd45.js"><link rel="prefetch" href="/docs/assets/js/vendors~docsearch.d97d6166.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.1dac2540.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><!----> <span class="site-name">DiscuzQ 安装文档</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="https://discuzq.icu" target="_blank" rel="noopener noreferrer" class="nav-link external">
  返回
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="https://discuzq.icu" target="_blank" rel="noopener noreferrer" class="nav-link external">
  返回
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>安装</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/安装/Windows 主机.html" class="sidebar-link">Windows 主机安装</a></li><li><a href="/docs/安装/Linux 主机.html" class="sidebar-link">Linux 主机安装</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>使用</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>配置</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>升级和转换</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>关于</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="小程序"><a href="#小程序" class="header-anchor">#</a> 小程序</h1> <h2 id="申请"><a href="#申请" class="header-anchor">#</a> 申请</h2> <h4 id="操作场景"><a href="#操作场景" class="header-anchor">#</a> 操作场景</h4> <p>本文档将指导您如何申请微信小程序账号。</p> <h4 id="前提条件"><a href="#前提条件" class="header-anchor">#</a> 前提条件</h4> <ul><li>拥有未被微信公众平台注册，未被微信开放平台注册，未被个人微信号绑定的邮箱。</li> <li>注册小程序所需的账号信息。</li></ul> <h4 id="操作步骤"><a href="#操作步骤" class="header-anchor">#</a> 操作步骤</h4> <h4 id="步骤一-注册账号信息"><a href="#步骤一-注册账号信息" class="header-anchor">#</a> 步骤一：注册账号信息</h4> <ol><li>进入<a href="https://mp.weixin.qq.com/" target="_blank" rel="noopener noreferrer">微信公众平台<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，单击击右上角的【立即注册】按钮。如下图所示：</li></ol> <p><img src="https://main.qcloudimg.com/raw/ae7aa12596ada0a6fc2d50695a6e6a83.png" alt=""></p> <ol start="2"><li>在注册账号类型页，单击选择【小程序】，如下图所示：</li></ol> <p><img src="https://main.qcloudimg.com/raw/497048997b3db3d2b5fc7aa6c34f2dcd.png" alt=""></p> <ol start="3"><li>在账号信息页，填写修改注册信息。如下图所示：</li></ol> <p><img src="https://main.qcloudimg.com/raw/5433acf160dc78a42317a7fe580ca579.png" alt=""></p> <ul><li><strong>邮箱</strong>：作为登录帐号，请填写未被微信公众平台注册，未被微信开放平台注册，未被个人微信号绑定的邮箱，每个邮箱仅能申请一个小程序。</li> <li><strong>密码</strong>：请填写微信小程序账号密码，字母、数字或者英文符号，最短8位，区分大小写。</li> <li><strong>确认密码</strong>：请再次填写微信小程序账号密码。</li> <li><strong>验证码</strong>:请根据图片信息，填写对应验证码。</li></ul> <ol start="4"><li>勾选【你已阅读并同意《微信公众平台服务协议》及《微信小程序平台服务条款》】，单击【注册】。</li></ol> <h4 id="步骤二-激活注册邮箱"><a href="#步骤二-激活注册邮箱" class="header-anchor">#</a> 步骤二：激活注册邮箱</h4> <ol><li>登录填写的注册邮箱并查收激活邮件，单击邮箱中的激活链接。</li></ol> <h4 id="步骤三-信息登记"><a href="#步骤三-信息登记" class="header-anchor">#</a> 步骤三：信息登记</h4> <p>1.单击邮箱中的激活链接后，继续下一步的注册流程。请选择主体类型选择，完善主体信息和管理员信息。</p> <p><img src="https://main.qcloudimg.com/raw/9cf43d44683afe3fd70fdc908186fc72.png" alt=""></p> <ul><li><strong>选择主体类型</strong>：</li></ul> <table><thead><tr><th>注册选择类型</th> <th>组织机构类型</th></tr></thead> <tbody><tr><td>个人</td> <td> 18岁以上有国内身份信息的微信实名用户</td></tr> <tr><td>企业类型</td> <td>个人独资企业、企业法定代表人、企业非法定代表人、非公司制企业法定代表人、全名所有制、农民专业合作社、企业分支机构、合伙企业、其他企业个体户，个体工商户、个体经营</td></tr> <tr><td>媒体类型</td> <td>事业单位媒体、其他媒体、电视广播、报刊、杂志、网络媒体等</td></tr> <tr><td rowspan="4">其他组织</td> <td>免费类型（基金会，政府机构驻华代表处）</td></tr> <tr><td> 社会团体（社会团体法定代表人、社会团体分支、代表机构、其他社会团体、群众团体）</td></tr> <tr><td> 民办非企业，学校，医院等</td></tr> <tr><td> 其他组织 （宗教活动场所、农村村民委员会、城市居民委员会、自定义区、其他未列明的组织机构）</td></tr> <tr><td rowspan="2">政府单位</td> <td>事业单位（事业单位法定代表人、事业单位分支、派出机构、部队医院、国家权力机关法定代表人、其他事业单位）</td></tr> <tr><td>政府机关(国家行政机关法定代表人、民主党派、政协组织、人民解放军、武警部队、其他机关)</td></tr></tbody></table> <ul><li><strong>选择验证方式：</strong></li></ul> <p>企业类型帐号可选择两种主体验证方式。</p> <p>方式一：支付验证
需要用公司的对公账户向腾讯公司打款来验证主体身份，打款信息在提交主体信息后可以查看到。请根据页面提示，向指定的收款帐号汇入指定金额。</p> <div class="custom-block danger"><p class="custom-block-title">DANGER</p> <p>请在10天内完成汇款，否则将注册失败。</p></div> <p>方式二：微信认证
通过微信认证验证主体身份，需支付 <strong>300元</strong> 认证费。认证通过前，小程序部分功能暂无法使用。如需了解主体验证方式请点击<a href="https://kf.qq.com/faq/170109QvMNRB170109nYnYFr.html" target="_blank" rel="noopener noreferrer">这里<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h4 id="步骤四-管理员信息登记"><a href="#步骤四-管理员信息登记" class="header-anchor">#</a> 步骤四：管理员信息登记</h4> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>个人主体账号无需进行以下操作。</p></div> <ol><li>填写管理员信息。</li></ol> <p><img src="https://main.qcloudimg.com/raw/4df8f172f27fd962da23f26cf7400879.jpg" alt=""></p> <ol start="2"><li>单击【确认】主体信息不可变更。即可注册成功。</li></ol> <h2 id="构建小程序"><a href="#构建小程序" class="header-anchor">#</a> 构建小程序</h2> <h4 id="操作场景-2"><a href="#操作场景-2" class="header-anchor">#</a> 操作场景</h4> <p>本文档将指导您如何使用 npm 方式构建 Discuz! Q 小程序。</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <ul><li>构建  Discuz! Q 小程序，需在您的构建环境中安装部署  <code>node</code> 与  <code>npm</code> 环境，为了您能够正常构建成功，建议您使用 <code>node: 14.x.x</code> 版本与 <code>npm: 6.14.x</code> 进行构建，以免产生不必要的错误。本文以 <code>Windows 10</code>系统、<code>node v14.17.3</code> 版本、<code>npm 6.14.10</code> 版本为例。</li> <li>安装部署  <code>node</code> 与  <code>npm</code> 环境，您可根据您的系统类型直接前往 <a href="https://nodejs.org/en/" target="_blank" rel="noopener noreferrer">Node.js 官网<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 并行下载安装，推荐 LTS 稳定版。如：<code>Download 14.17.4 LTS</code>。</li> <li>因 Windows 7 最高仅支持 <code>node: 13.x.x</code> 版本，您可以前往 <a href="https://nodejs.org/zh-cn/download/releases/" target="_blank" rel="noopener noreferrer">Node.js 历史版本<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 下载 <code>node: 12.x.x</code> 版本进行安装构建。</li></ul></div> <h4 id="前提条件-2"><a href="#前提条件-2" class="header-anchor">#</a> 前提条件</h4> <ul><li>已安装 PC 端 Discuz! Q。</li> <li>已安装微信开发者工具。</li> <li>已部署所需的构建环境。</li></ul> <h4 id="操作步骤-2"><a href="#操作步骤-2" class="header-anchor">#</a> 操作步骤</h4> <h3 id="步骤一-获取小程序源码"><a href="#步骤一-获取小程序源码" class="header-anchor">#</a> 步骤一：获取小程序源码</h3> <ol><li>请 <a href="https://gitee.com/Discuz/discuz-fe.git" target="_blank" rel="noopener noreferrer">单击此处<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 下载小程序源码至您构建环境的任意目录中，并进行解压。</li></ol> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>若您的构建环境已安装 <a href="https://git-scm.com/downloads" target="_blank" rel="noopener noreferrer">git 工具<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，建议您使用 <code>git clone</code> 命令进行下载，方便后续更新。命令为：<code>git clone https://gitee.com/Discuz/discuz-fe.git</code>。</p></div> <h3 id="步骤二-配置小程序"><a href="#步骤二-配置小程序" class="header-anchor">#</a> 步骤二：配置小程序</h3> <ol><li>使用文本编辑器打开源码目录下 <code>dzq.config.yaml</code> 文件。并将文件中 配置字段修改为您的微信小程序小程序信息。如下图所示：</li></ol> <p><img src="https://main.qcloudimg.com/raw/728456790afc9f4b8905c36ae62609d5.png" alt=""></p> <ul><li>TITLE：您的小程序名称。</li> <li>HOST：您的 Discuz! Q 站点地址。如：<code>https://discuz.chat</code>。</li> <li>APPID：您的小程序 appid。</li> <li>VERSION：用于标识小程序版本号，请勿修改。</li></ul> <p>小程序 appid 您可登录 <a href="https://mp.weixin.qq.com/" target="_blank" rel="noopener noreferrer">微信公众号平台<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ，依次单击【开发管理】&gt; 【开发设置】进行查看。如下图所示：
<img src="https://main.qcloudimg.com/raw/a73e1dbd6801b679aae6b58a46706d96.png" alt=""></p> <h3 id="步骤三-安装项目依赖"><a href="#步骤三-安装项目依赖" class="header-anchor">#</a> 步骤三：安装项目依赖</h3> <ol><li>解压文件后，在您的环境终端中，切换到解压目录 <code>discuz-fe/mini</code>目录下。您可以参考以下命令进行目录切换。</li></ol> <div class="language- extra-class"><pre class="language-text"><code>cd discuz-fe/mini #切换到 discuz-fe/mini 目录
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Windows 环境下，您可以先输入您的盘符，切换到放置源码的盘符，如 <code>F:</code>。切换到盘符后，在进行目录切换。如源码目录为：<code>F:\discuz-fe</code>，则先输入<code>F:</code>回车后再输入<code>cd discuz-fe/mini</code>进行切换。</p></div> <ol start="2"><li>在 <code>discuz-fe/mini</code> 目录下，输入以下命令安装项目依赖。</li></ol> <div class="language- extra-class"><pre class="language-text"><code>npm install
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>若您下载依赖时提示失败，您可以尝试先运行命令 <code>npm install --registry=http://mirrors.cloud.tencent.com/npm/</code> (单次生效)或 <code>npm config set registry http://mirrors.cloud.tencent.com/npm/</code>(永久生效)，更改安装依赖的源地址后，在运行 <code>npm install</code>命令。</p></div> <h3 id="步骤四-编译小程序"><a href="#步骤四-编译小程序" class="header-anchor">#</a> 步骤四：编译小程序</h3> <ol><li>在您的环境终端中，切换到解压目录 <code>discuz-fe/mini</code> 目录下。您可以参考以下命令进行目录切换。</li></ol> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>若您已在当前目录下，可忽略此步骤。</p></div> <div class="language- extra-class"><pre class="language-text"><code>cd discuz-fe/mini #切换到 discuz-fe/mini 目录
</code></pre></div><ol start="2"><li>运行以下命令编译小程序。</li></ol> <div class="language- extra-class"><pre class="language-text"><code>npm run build:weapp
</code></pre></div><ol start="3"><li>编译成功后，将提示如下信息。如图所示：</li></ol> <p><img src="https://main.qcloudimg.com/raw/27a628689cd70dfa28e053895b22f028.png" alt=""></p> <h3 id="步骤五-导入微信开发者工具并上传"><a href="#步骤五-导入微信开发者工具并上传" class="header-anchor">#</a> 步骤五：导入微信开发者工具并上传</h3> <p>编译成功后将会在 <code>\discuz-fe\mini</code> 目录下，生成 <code>dist</code> 文件目录，您需将该文件目录导入至微信开发者工具中。</p> <ol><li>打开微信开发者工具，使用微信扫码登录微信微信开发者工具。</li> <li>单击【导入】。如下图所示：
<img src="https://main.qcloudimg.com/raw/01572c57afd4dc8e9834d1506bd3ae6b.png" alt=""></li> <li>在弹出的系统文件管理器中，选择源码目录 <code>\discuz-fe\mini</code> 目录下 <code>dist</code> 文件夹并单击【选择文件夹】。如下图所示：</li></ol> <p><img src="https://main.qcloudimg.com/raw/e36aaa088ce4a8c3e936d256bd532474.png" alt=""></p> <ol start="4"><li><p>在“导入项目”页面，输入您的 <code>项目名称</code>与 <code>AppID</code>。（默认情况下会自动填写，您可无需自行输入）。
<img src="https://main.qcloudimg.com/raw/140df1945fedcab1606efd50a4265bd8.png" alt=""></p></li> <li><p>单击【确定】进行导入。</p></li></ol> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>导入完成后，将进入小程序开发者工具，上传时需要在右上方的【本地设置】中进行如下设置。</p></div> <ol start="6"><li>单击右上角【详情】，在展开的设置页中，单击选择【本地设置】。并勾选以下内容。</li></ol> <p><img src="https://main.qcloudimg.com/raw/03adea795b0b34816a13eead3a301afc.png" alt=""></p> <ul><li><strong>上传代码时自动压缩混淆</strong>：必选，将压缩构建的代码大小。否则可能导致上传时编译失败。</li> <li><strong>不校验合法域名、web-view（业务域名）、TLS 版本以及 HTTPS 证书</strong>：建议开启。否则可能与 Discuz! Q 无法进行正常通讯。</li> <li><strong>自动多核心编译</strong>：可选，勾选后可加快编译速度。</li></ul> <ol start="7"><li>完成设置页设置后，单击右上角【上传】。如下图所示：</li></ol> <p><img src="https://main.qcloudimg.com/raw/ad1b623b90ba4bce1db9f6758f3b1efe.png" alt=""></p> <ol start="8"><li>在弹出的版本信息中，输入您的版本号与项目备注信息并单击【上传】。</li> <li>等待上传完成后，即可完成操作。您可前往 <a href="https://mp.weixin.qq.com/" target="_blank" rel="noopener noreferrer">微信公众平台<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 发布您的 Discuz! Q 小程序。详细操作参见：<a href="https://discuz.com/docs/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#%E5%8F%91%E5%B8%83" target="_blank" rel="noopener noreferrer">Discuz! Q 小程序发布<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 。</li></ol> <h2 id="发布"><a href="#发布" class="header-anchor">#</a> 发布</h2> <h4 id="操作场景-3"><a href="#操作场景-3" class="header-anchor">#</a> 操作场景</h4> <p>本文档将指导您使用微信开发者工具上传构建完成的 Discuz! Q 小程序后，如何发布 Discuz! Q 小程序，使可在微信中进行搜索正常使用。</p> <h4 id="前提条件-3"><a href="#前提条件-3" class="header-anchor">#</a> 前提条件</h4> <ul><li>已使用微信开发者工具上传构建完成的 Discuz! Q 小程序。</li></ul> <h4 id="操作步骤-3"><a href="#操作步骤-3" class="header-anchor">#</a> 操作步骤</h4> <ol><li><p>使用小程序的微信号登录 <a href="https://mp.weixin.qq.com/" target="_blank" rel="noopener noreferrer">微信公众平台<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p></li> <li><p>在小程序管理后台中，单击侧边菜单栏【版本管理】。即可看见已上传的版本。如下图所示：</p></li></ol> <p><img src="https://main.qcloudimg.com/raw/f9cc1672f372a5adafe9785937a03a0a.png" alt=""></p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>在版本管理页没有已上传的开发版本，请检查是否正确上传成功。</p></div> <ol start="3"><li>单击【提交审核】，并完成信息确认。</li></ol> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <ul><li>提交审核前需填写完成微信小程序基本信息与小程序开发与管理的绑定操作。详情可登录小程序管理后台首页查看 <a href="https://mp.weixin.qq.com/wxamp/home/guide" target="_blank" rel="noopener noreferrer">小程序发布流程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</li> <li>发布 Discuz! Q 小程序后，需等待微信审核，审核成功后，即可正常使用，请耐心等待。</li></ul></div> <ol start="4"><li>审核通过后，在小程序管理后台【版本管理】，单击【发布】，即可完成发布 Discuz! Q 小程序操作。</li></ol> <h2 id="配置"><a href="#配置" class="header-anchor">#</a> 配置</h2> <h4 id="概述"><a href="#概述" class="header-anchor">#</a> 概述</h4> <p>本文档将对 Discuz! Q 小程序的基本配置信息进行说明。您可参考以下内容，填写补充小程序相关配置。</p> <h4 id="服务器域名配置"><a href="#服务器域名配置" class="header-anchor">#</a> 服务器域名配置</h4> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <ul><li>每个微信小程序需要事先设置通讯域名，小程序只可以跟指定的域名进行网络通信。包括普通 HTTPS 请求（wx.request）、上传文件（wx.uploadFile）、下载文件（wx.downloadFile) 和 WebSocket 通信（wx.connectSocket）。</li> <li>Discuz! Q 小程序需配置 request合法域名、uploadFile合法域名、downloadFile 合法域名三个域名。</li></ul></div> <ol><li><p>使用小程序的微信号登录 <a href="https://mp.weixin.qq.com/" target="_blank" rel="noopener noreferrer">微信公众平台<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p></li> <li><p>在小程序管理后台中，单击侧边菜单栏【开发管理】。可进行配置服务器域名。如下图所示：</p></li></ol> <p><img src="https://main.qcloudimg.com/raw/cfd592e3bb068c5e131bec4d7f4c5ca2.png" alt=""></p> <ol start="3"><li>单击【修改】，进入配置服务器信息页并使用小程序管理员微信扫码身份确认。</li> <li>在配置服务器信息中，输入如下信息：</li></ol> <p><img src="https://main.qcloudimg.com/raw/1a0e53c74723d16f92a95051286172fd.png" alt=""></p> <ul><li><strong>request合法域名</strong>: 请输入您的网站地址。此处以 discuz 官方社区网站地址 <code>https://discuz.chat</code> 为例。</li> <li><strong>socket合法域名</strong>: 不填写。</li> <li><strong>uploadFile合法域名</strong>: 请输入您的网站地址。此处以 discuz 官方社区网站地址 <code>https://discuz.chat</code> 为例。</li> <li><strong>downloadFile合法域名</strong>: 请输入您的网站地址。此处以 discuz 官方社区网站地址 <code>https://discuz.chat</code> 为例。</li> <li><strong>udp合法域名</strong>：不填写。</li></ul> <p>5.单击【保存并提交】，即可完成服务器域名配置。</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/docs/assets/js/app.4a94bff3.js" defer></script><script src="/docs/assets/js/2.65b3c0ea.js" defer></script><script src="/docs/assets/js/1.93f47670.js" defer></script><script src="/docs/assets/js/43.c3501ba2.js" defer></script>
  </body>
</html>
