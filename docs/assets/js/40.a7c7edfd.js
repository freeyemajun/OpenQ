(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{228:function(t,s,_){"use strict";_.r(s);var a=_(6),v=Object(a.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"linux-主机安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#linux-主机安装"}},[t._v("#")]),t._v(" Linux 主机安装")]),t._v(" "),s("h2",{attrs:{id:"基于手动配置的环境"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基于手动配置的环境"}},[t._v("#")]),t._v(" 基于手动配置的环境")]),t._v(" "),s("h3",{attrs:{id:"apache"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#apache"}},[t._v("#")]),t._v(" Apache")]),t._v(" "),s("h4",{attrs:{id:"操作场景"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#操作场景"}},[t._v("#")]),t._v(" 操作场景")]),t._v(" "),s("p",[t._v("本文档将指导您如何在已安装 Apache 服务的 Linux 服务器上安装部署 Discuz! Q。")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("ul",[s("li",[t._v("若您已知晓如何安装部署 Discuz! Q，您可以直接"),s("a",{attrs:{href:"https://discuzq.icu",target:"_blank",rel:"noopener noreferrer"}},[t._v("单击此处"),s("OutboundLink")],1),t._v("下载 Discuz! Q 进行安装部署。")]),t._v(" "),s("li",[t._v("本文档以 Apache 2.4.46 版本、PHP 7.3.23、 CentOS 7.6 为例。")])])]),t._v(" "),s("h4",{attrs:{id:"前提条件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前提条件"}},[t._v("#")]),t._v(" 前提条件")]),t._v(" "),s("ul",[s("li",[t._v("服务器已安装的 PHP 版本为 7.2.5 及以上(暂不推荐使用7.4)，数据库使用 MySQL 5.7.9 版本以上或 MariaDB 10.2 以上。")]),t._v(" "),s("li",[t._v("已成功登录 Linux 服务器。")])]),t._v(" "),s("h4",{attrs:{id:"操作步骤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#操作步骤"}},[t._v("#")]),t._v(" 操作步骤")]),t._v(" "),s("h4",{attrs:{id:"步骤一-配置php"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#步骤一-配置php"}},[t._v("#")]),t._v(" 步骤一：配置PHP")]),t._v(" "),s("h4",{attrs:{id:"安装扩展"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装扩展"}},[t._v("#")]),t._v(" 安装扩展")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("ul",[s("li",[t._v("Discuz! Q 依赖于 "),s("code",[t._v("BCMath")]),t._v(" "),s("code",[t._v("Ctype")]),t._v(" "),s("code",[t._v("Curl")]),t._v(" "),s("code",[t._v("Dom")]),t._v(" "),s("code",[t._v("Fileinfo")]),t._v(" "),s("code",[t._v("GD")]),t._v(" "),s("code",[t._v("JSON")]),t._v(" "),s("code",[t._v("Mbstring")]),t._v(" "),s("code",[t._v("Exif")]),t._v(" "),s("code",[t._v("OpenSSL")]),t._v(" "),s("code",[t._v("PDO")]),t._v(" "),s("code",[t._v("PDO_mysql")]),t._v(" "),s("code",[t._v("Tokenizer")]),t._v(" "),s("code",[t._v("XML")]),t._v(" "),s("code",[t._v("Zip")]),t._v("扩展插件，在 PHP 中需开启以上扩展。")]),t._v(" "),s("li",[t._v("以下操作因为系统版本，软件版本的不同，操作上会有所差异，请根据您的具体情况进行开启对应函数，以下操作仅提供示例。")])])]),t._v(" "),s("ol",[s("li",[s("p",[t._v("查看 PHP 已安装扩展。在终端中，可以输入 "),s("code",[t._v("php -m")]),t._v(" 查看已安装扩展。")])]),t._v(" "),s("li",[s("p",[t._v("安装缺失扩展。在终端中，您可以根据查询结果安装对应缺失的扩展。")]),t._v(" "),s("ul",[s("li",[t._v("如缺失 "),s("code",[t._v("Exif")]),t._v(" 扩展，可以使用以下命令进行编译安装扩展 "),s("code",[t._v("Exif")]),t._v("扩展。")])])])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("以下路径仅提供示例。请根据实际情况进行输入。")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("# 使用 cd 命令进入 php 的源码的 exif 模块目录。\ncd /root/lamp1.7/src/php-7.3.23/ext/exif/\n\n# 执行 phpize 脚本。\n/usr/local/php/bin/phpize\n\n# 编译配置。\n./configure --with-php-config=/usr/local/php/bin/php-config\n\n# 编译安装 exif 模块。\nmake && make install\n")])])]),s("ol",[s("li",[t._v("配置"),s("code",[t._v("php.ini")]),t._v("文件。可在终端中输入"),s("code",[t._v("php --ini")]),t._v("查看"),s("code",[t._v("php.ini")]),t._v("配置文件路径。如下图所示：")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://main.qcloudimg.com/raw/149f2f45d6c305fa8710fe265c6be57d.png",alt:""}})]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v("您可通过"),s("code",[t._v("vim")]),t._v("命令，或使用 WinSCP 工具，根据查询到的文件路径，打开"),s("code",[t._v("php.ini")]),t._v("文件。")]),t._v(" "),s("li",[t._v("编辑"),s("code",[t._v("php.ini")]),t._v(" 文件，去掉以下字段前面的"),s("code",[t._v(";")]),t._v("分号，并保存"),s("code",[t._v("php.ini")]),t._v(" 文件。如下所示：")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("extension=exif    \nexif.encode_unicode = ISO-8859-15\nexif.decode_unicode_motorola = UCS-2BE\nexif.decode_unicode_intel    = UCS-2LE\nexif.encode_jis =\nexif.decode_jis_motorola = JIS\nexif.decode_jis_intel    = JIS=\n")])])]),s("ol",{attrs:{start:"4"}},[s("li",[t._v("重启 PHP 与 Apache 服务。")])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("您可参考命令"),s("code",[t._v("service php-fpm restart")]),t._v("与 "),s("code",[t._v("service httpd restart")]),t._v("重启 PHP 与 Apache 服务。")])]),t._v(" "),s("h4",{attrs:{id:"启用-php-函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启用-php-函数"}},[t._v("#")]),t._v(" 启用 PHP 函数")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("ul",[s("li",[t._v("Discuz！Q 依赖于 "),s("code",[t._v("symlink")]),t._v("、"),s("code",[t._v("readlink")]),t._v("、"),s("code",[t._v("putenv")]),t._v("、"),s("code",[t._v("realpath")]),t._v("、"),s("code",[t._v("shell_exec")]),t._v(" 函数，在PHP中需开启以上函数。")]),t._v(" "),s("li",[t._v("以下操作因为系统版本，软件版本的不同，操作上和命令上会有所差异，请根据您的具体情况开启 "),s("code",[t._v("mod_rewrite")]),t._v(" ，以下操作仅提供示例。")])])]),t._v(" "),s("ol",[s("li",[t._v("打开并编辑 "),s("code",[t._v("php.ini")]),t._v("文件。查找 "),s("code",[t._v("disable_functions")]),t._v("字段，并删除禁用掉的"),s("code",[t._v("symlink")]),t._v("、"),s("code",[t._v("readlink")]),t._v("、 "),s("code",[t._v("putenv")]),t._v("、 "),s("code",[t._v("realpath")]),t._v("、"),s("code",[t._v("shell_exec")]),t._v(" 函数。如下所示：")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("disable_functions = passthru,exec,system,chroot,chgrp,chown,shell_exec,proc_open,proc_get_status,popen,ini_alter,ini_restore,dl,openlog,syslog,popepassthru,stream_socket_server\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[t._v("保存 "),s("code",[t._v("php.ini")]),t._v("文件。")]),t._v(" "),s("li",[t._v("重启 PHP 与 Apache 服务。")])]),t._v(" "),s("h4",{attrs:{id:"步骤二-配置-apache"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#步骤二-配置-apache"}},[t._v("#")]),t._v(" 步骤二：配置 Apache")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("ul",[s("li",[t._v("Discuz！Q 依赖于 "),s("code",[t._v("mod_rewrite")]),t._v(" 模块。请确保已经启用 "),s("code",[t._v("mod_rewrite")]),t._v("，以下操作将指导您启动 "),s("code",[t._v("mod_rewrite")]),t._v("。")]),t._v(" "),s("li",[t._v("以下操作因为系统版本，软件版本的不同，操作上和命令上会有所差异，请根据您的具体情况开启 "),s("code",[t._v("mod_rewrite")]),t._v(" ，以下操作仅提供示例。")])])]),t._v(" "),s("h4",{attrs:{id:"启用-mod-rewrite"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启用-mod-rewrite"}},[t._v("#")]),t._v(" 启用 mod_rewrite")]),t._v(" "),s("ol",[s("li",[t._v("检查 "),s("code",[t._v("mod_rewrite")]),t._v(" 是否启用。您可以在终端中输入 "),s("code",[t._v("httpd -M")]),t._v(" 查看已安装模块。")]),t._v(" "),s("li",[t._v("如果查询结果中无 "),s("code",[t._v("rewrite_module")]),t._v(" 字段，您可以在 "),s("code",[t._v("conf")]),t._v(" 目录的 "),s("code",[t._v("httpd.conf")]),t._v(" 文件中，查找以下字段，并去掉字段前"),s("code",[t._v("#")]),t._v(" 符号。如下所示：")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("LoadModule rewrite_module modules/mod_rewrite.so\n")])])]),s("ol",{attrs:{start:"3"}},[s("li",[t._v("定位到 "),s("code",[t._v("<directory />")]),t._v(" 字段，并修改内容为如下内容：")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("<directory />\n        Options All\n        AllowOverride All\n        DirectoryIndex index.php index.html\n</directory>\n")])])]),s("ol",{attrs:{start:"4"}},[s("li",[t._v("重启 Apache 服务。")])]),t._v(" "),s("h4",{attrs:{id:"步骤三-下载并解压-discuz-q-安装包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#步骤三-下载并解压-discuz-q-安装包"}},[t._v("#")]),t._v(" 步骤三：下载并解压 Discuz！Q 安装包")]),t._v(" "),s("ol",[s("li",[t._v("您可以通过以下命令在网站主目录下创建 Discuz！Q 网站目录，并下载 Discuz！Q 安装包与解压。")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("# 创建Discuz！Q 网站目录，目录名可自定义，此处以 discuz 为例。\nmkdir discuz\n\n# 进入 discuz 目录\ncd discuz\n\n# 下载 Discuz！Q 安装包\nwget -c https://discuzq.icu\n\n# 解压 Discuz！Q 安装包\nunzip dzq_latest_install.zip\n")])])]),s("h4",{attrs:{id:"步骤四-初始化安装-discuz-q"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#步骤四-初始化安装-discuz-q"}},[t._v("#")]),t._v(" 步骤四：初始化安装 Discuz! Q")]),t._v(" "),s("ol",[s("li",[t._v("打开本地浏览器，访问 "),s("code",[t._v("http://<绑定网站的域名名称>/install")]),t._v(" 。如下图所示：")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://main.qcloudimg.com/raw/d571ed3234565af42c508666b827ca37.png",alt:""}})]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("ul",[s("li",[t._v("站点如需部署 SSL 证书，使用 HTTPS 协议进行站点访问。请在以下操作之前部署安装 SSL 证书，并使用"),s("code",[t._v("https://<绑定网站的域名名称>/install")]),t._v("  进行访问。部署安装 SSL 证书详情操作请参考： "),s("a",{attrs:{href:"https://cloud.tencent.com/document/product/400/35244",target:"_blank",rel:"noopener noreferrer"}},[t._v("Nginx 服务器证书安装"),s("OutboundLink")],1),t._v("。")]),t._v(" "),s("li",[t._v("如需购买 SSL 证书，可参考 "),s("a",{attrs:{href:"https://cloud.tencent.com/document/product/400/7995",target:"_blank",rel:"noopener noreferrer"}},[t._v("SSL 证书购买流程"),s("OutboundLink")],1),t._v("，请根据您的实际情况进行购买相关证书。腾讯云为 Discuz! Q 站点提供免费 SSL 证书申请。详情请查看："),s("a",{attrs:{href:"https://cloud.tencent.com/document/product/400/6814",target:"_blank",rel:"noopener noreferrer"}},[t._v("域名型（DV）免费证书申请流程"),s("OutboundLink")],1)])])]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[s("p",[t._v("单击【下一步】，Discuz! Q 将自行进行站点检查。如有报错等问题，可参考 "),s("a",{attrs:{href:"https://discuzq.icu/docs/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("常见问题"),s("OutboundLink")],1),t._v(" 进行排查处理。")])]),t._v(" "),s("li",[s("p",[t._v("Discuz! Q 检查完成后，需配置网站相关信息。如下图所示：")])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://main.qcloudimg.com/raw/8e3ac52669180620b946750787b50c95.png",alt:""}})]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("站点名称")]),t._v("：请输入您的站点名称信息，可自定义。")]),t._v(" "),s("li",[s("strong",[t._v("MySQL 服务器地址")]),t._v("：请输入您的 MySQL 服务器地址。")]),t._v(" "),s("li",[s("strong",[t._v("数据库名称")]),t._v("：请输入您的数据库名称。")]),t._v(" "),s("li",[s("strong",[t._v("MySQL 用户名")]),t._v("：请输入您的数据库用户名。")]),t._v(" "),s("li",[s("strong",[t._v("MySQL 密码")]),t._v("：请输入您的数据库密码。")]),t._v(" "),s("li",[s("strong",[t._v("表前缀")]),t._v("：可选，可自定义数据库表前缀名称。默认不填。")]),t._v(" "),s("li",[s("strong",[t._v("设置管理员用户名")]),t._v("：请输入您 Discuz! Q 站点的管理员用户名。")]),t._v(" "),s("li",[s("strong",[t._v("设置管理员密码")]),t._v("：请输入您 Discuz! Q 站点的管理员密码。")]),t._v(" "),s("li",[s("strong",[t._v("管理员密码确认")]),t._v("：请再次输入您 Discuz! Q 站点的管理员密码。")])]),t._v(" "),s("ol",{attrs:{start:"4"}},[s("li",[t._v("单击【下一步】。即可完成 DIscuz！Q 的安装部署。")])]),t._v(" "),s("h4",{attrs:{id:"步骤五-添加计划任务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#步骤五-添加计划任务"}},[t._v("#")]),t._v(" 步骤五：添加计划任务")]),t._v(" "),s("p",[t._v("为保证 DIscuz！Q 站点功能的正常使用。您还需要在服务器添加计划任务。在终端中输入以下命令并执行。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("php <网站主目录>/disco schedule:run >> /dev/null 2>&1\n")])])]),s("h3",{attrs:{id:"nginx"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx"}},[t._v("#")]),t._v(" Nginx")]),t._v(" "),s("h4",{attrs:{id:"操作场景-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#操作场景-2"}},[t._v("#")]),t._v(" 操作场景")]),t._v(" "),s("p",[t._v("本文档将指导您如何在已安装 Nginx 服务的 Linux 服务器上安装部署 Discuz! Q。")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("ul",[s("li",[t._v("若您已知晓如何安装部署 Discuz! Q，您可以直接"),s("a",{attrs:{href:"https://discuzq.icu",target:"_blank",rel:"noopener noreferrer"}},[t._v("单击此处"),s("OutboundLink")],1),t._v("下载 Discuz! Q 进行安装部署。")]),t._v(" "),s("li",[t._v("本文档以 Nginx 1.18.0 版本、PHP 7.3.23  、CentOS 7.6 为例。")])])]),t._v(" "),s("h4",{attrs:{id:"前提条件-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前提条件-2"}},[t._v("#")]),t._v(" 前提条件")]),t._v(" "),s("ul",[s("li",[t._v("服务器已安装的 PHP 版本为 7.2.5 及以上(暂不推荐使用7.4)，数据库使用 MySQL 5.7.9 版本以上或MariaDB 10.2以上。")]),t._v(" "),s("li",[t._v("已成功登录 Linux 服务器。")])]),t._v(" "),s("h4",{attrs:{id:"操作步骤-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#操作步骤-2"}},[t._v("#")]),t._v(" 操作步骤")]),t._v(" "),s("h4",{attrs:{id:"步骤一-配置php-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#步骤一-配置php-2"}},[t._v("#")]),t._v(" 步骤一：配置PHP")]),t._v(" "),s("h4",{attrs:{id:"安装扩展-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装扩展-2"}},[t._v("#")]),t._v(" 安装扩展")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("ul",[s("li",[t._v("Discuz! Q 依赖于 "),s("code",[t._v("BCMath")]),t._v(" "),s("code",[t._v("Ctype")]),t._v(" "),s("code",[t._v("Curl")]),t._v(" "),s("code",[t._v("Dom")]),t._v(" "),s("code",[t._v("Fileinfo")]),t._v(" "),s("code",[t._v("GD")]),t._v(" "),s("code",[t._v("JSON")]),t._v(" "),s("code",[t._v("Mbstring")]),t._v(" "),s("code",[t._v("Exif")]),t._v(" "),s("code",[t._v("OpenSSL")]),t._v(" "),s("code",[t._v("PDO")]),t._v(" "),s("code",[t._v("PDO_mysql")]),t._v(" "),s("code",[t._v("Tokenizer")]),t._v(" "),s("code",[t._v("XML")]),t._v(" "),s("code",[t._v("Zip")]),t._v("扩展插件，在 PHP 中需开启以上扩展。")]),t._v(" "),s("li",[t._v("以下操作因为系统版本，软件版本的不同，操作上会有所差异，请根据您的具体情况进行开启对应扩展，以下操作仅提供示例。")])])]),t._v(" "),s("ol",[s("li",[t._v("查看 php 已安装扩展。在终端中，可以输入"),s("code",[t._v("php -m")]),t._v("查看已安装扩展。")]),t._v(" "),s("li",[t._v("安装缺失扩展。在终端中，您可以根据查询结果安装对应缺失的扩展。\n"),s("ul",[s("li",[t._v("如缺失"),s("code",[t._v("Exif")]),t._v("扩展。可以使用以下命令进行编译安装扩展 "),s("code",[t._v("Exif")]),t._v("扩展。")])])])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("以下路径仅提供示例。请根据实际情况进行输入。")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("# 使用 cd 命令进入 php 的源码的exif模块目录。\ncd /root/lnmp1.7/src/php-7.3.23/ext/exif/\n\n# 执行 phpize 脚本。\n/usr/local/php/bin/phpize\n\n# 编译配置。\n./configure --with-php-config=/usr/local/php/bin/php-config\n\n# 编译安装 exif 模块。\nmake && make install\n")])])]),s("ol",[s("li",[t._v("配置"),s("code",[t._v("php.ini")]),t._v("文件。可在终端中输入"),s("code",[t._v("php --ini")]),t._v("查看"),s("code",[t._v("php.ini")]),t._v("配置文件路径。如下图所示：")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://main.qcloudimg.com/raw/149f2f45d6c305fa8710fe265c6be57d.png",alt:""}})]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v("您可通过"),s("code",[t._v("vim")]),t._v("命令，或使用 WinSCP 工具，根据查询到的文件路径，打开"),s("code",[t._v("php.ini")]),t._v("文件。")]),t._v(" "),s("li",[t._v("编辑"),s("code",[t._v("php.ini")]),t._v(" 文件，去掉以下字段前面的"),s("code",[t._v(";")]),t._v("分号，并保存"),s("code",[t._v("php.ini")]),t._v(" 文件。如下所示")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("extension=exif    \nexif.encode_unicode = ISO-8859-15\nexif.decode_unicode_motorola = UCS-2BE\nexif.decode_unicode_intel    = UCS-2LE\nexif.encode_jis =\nexif.decode_jis_motorola = JIS\nexif.decode_jis_intel    = JIS=\n")])])]),s("ol",{attrs:{start:"3"}},[s("li",[t._v("重启 PHP 与 Nginx 服务。"),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("您可以参考"),s("code",[t._v("service php-fpm restart")]),t._v("与 "),s("code",[t._v("nginx -s reload")]),t._v("命令重启 PHP 与 Nginx 服务。")])])])]),t._v(" "),s("h4",{attrs:{id:"步骤二-安装-php-函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#步骤二-安装-php-函数"}},[t._v("#")]),t._v(" 步骤二:安装 PHP 函数")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("ul",[s("li",[t._v("Discuz! Q 依赖于"),s("code",[t._v("symlink")]),t._v("、"),s("code",[t._v("readlink")]),t._v("、 "),s("code",[t._v("putenv")]),t._v("、 "),s("code",[t._v("realpath")]),t._v("、"),s("code",[t._v("shell_exec")]),t._v("函数，在PHP中需开启以上函数。")]),t._v(" "),s("li",[t._v("以下操作因为系统版本，软件版本的不同，操作上会有所差异，请根据您的具体情况进行开启对应函数，以下操作仅提供示例。")])])]),t._v(" "),s("ol",[s("li",[t._v("打开并编辑 "),s("code",[t._v("php.ini")]),t._v("文件。查找 "),s("code",[t._v("disable_functions")]),t._v("字段，并删除禁用掉的"),s("code",[t._v("symlink")]),t._v("、"),s("code",[t._v("readlink")]),t._v("、 "),s("code",[t._v("putenv")]),t._v("、 "),s("code",[t._v("realpath")]),t._v("、"),s("code",[t._v("shell_exec")]),t._v(" 函数。如下所示：")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("disable_functions = passthru,exec,system,chroot,chgrp,chown,shell_exec,proc_open,proc_get_status,popen,ini_alter,ini_restore,dl,openlog,syslog,popepassthru,stream_socket_server\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[t._v("保存 "),s("code",[t._v("php.ini")]),t._v("文件。")]),t._v(" "),s("li",[t._v("重启 PHP 与 Nginx 服务。")])]),t._v(" "),s("h4",{attrs:{id:"步骤三-下载并解压-discuz-q-安装包-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#步骤三-下载并解压-discuz-q-安装包-2"}},[t._v("#")]),t._v(" 步骤三：下载并解压 Discuz！Q 安装包")]),t._v(" "),s("ol",[s("li",[t._v("您可以通过以下命令在网站主目录下创建 Discuz！Q 网站目录，下载 Discuz！Q 安装包与解压。")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("# 创建Discuz！Q 网站目录，目录名可自定义，此处以discuz为例。\nmkdir discuz\n\n#进入 discuz目录\ncd discuz\n\n#下载Discuz！Q 安装包\nwget -c https://discuzq.icu\n\n#解压 Discuz！Q 安装包\nunzip dzq_latest_install.zip\n")])])]),s("h4",{attrs:{id:"步骤四-配置-nginx"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#步骤四-配置-nginx"}},[t._v("#")]),t._v(" 步骤四：配置 Nginx")]),t._v(" "),s("ol",[s("li",[t._v("查看 "),s("code",[t._v("nginx")]),t._v(" 配置文件。您可以使用 "),s("code",[t._v("nginx -t")]),t._v(" 命令查看 "),s("code",[t._v("nginx.conf")]),t._v(" 配置文件路径。如下所示：")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://main.qcloudimg.com/raw/b4cfcbe58fd61b5d79e2e0af64cb5a35.png",alt:""}})]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v("您可通过 "),s("code",[t._v("vim")]),t._v(" 命令，或使用 WinSCP 工具，打开 "),s("code",[t._v("nginx.conf")]),t._v(" 配置文件进行以下配置。")])]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),s("p",[t._v("Nginx 必须包含以下配置。")])]),t._v(" "),s("p",[t._v("请将"),s("code",[t._v("root")]),t._v("目录指向 "),s("code",[t._v("<站点主目录>/public")]),t._v("目录，同时一定要配置"),s("code",[t._v("index")]),t._v("和 "),s("code",[t._v("location /")]),t._v("，将所有的请求将引导到 "),s("code",[t._v("index.php")]),t._v(" 。具体配置请参考如下：")]),t._v(" "),s("h4",{attrs:{id:"root-配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#root-配置"}},[t._v("#")]),t._v(" root 配置")]),t._v(" "),s("p",[t._v("请确认 "),s("code",[t._v("root")]),t._v(" 指向了安装好的 "),s("code",[t._v("public")]),t._v("目录，以下是示例，请按自己的实际配置设置。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("root /home/www/discuz/public;\n")])])]),s("h4",{attrs:{id:"index-配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#index-配置"}},[t._v("#")]),t._v(" index 配置")]),t._v(" "),s("p",[t._v("请确认 index 的第一项是 index.php ，以下为示例。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("index index.php index.html;\n")])])]),s("h4",{attrs:{id:"location-配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#location-配置"}},[t._v("#")]),t._v(" location 配置")]),t._v(" "),s("p",[t._v("请确认 location / 按如下配置，如果之前有相关配置，请替换：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("    location / {\n        try_files $uri $uri/ /index.php?$query_string;\n    }\n")])])]),s("h4",{attrs:{id:"nginx-建议配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx-建议配置"}},[t._v("#")]),t._v(" Nginx 建议配置")]),t._v(" "),s("p",[t._v("建议添加以下配置，以启用 gzip 压缩,减少服务器资源损耗。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('  gzip on;\n  gzip_min_length 1024;\n  gzip_types application/json text/html text/css application/x-javascript application/javascript application/vnd.api+json;\n  gzip_disable "MSIE [1-6]\\.";\n  gzip_comp_level 2;\n')])])]),s("h4",{attrs:{id:"步骤五-初始化安装-discuz-q"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#步骤五-初始化安装-discuz-q"}},[t._v("#")]),t._v(" 步骤五：初始化安装 Discuz! Q")]),t._v(" "),s("ol",[s("li",[t._v("打开本地浏览器，访问 "),s("code",[t._v("http://<绑定网站的域名名称>/install")]),t._v(" 。如下图所示：")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://main.qcloudimg.com/raw/d571ed3234565af42c508666b827ca37.png",alt:""}})]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("ul",[s("li",[t._v("站点如需部署 SSL 证书，使用 HTTPS 协议进行站点访问。请在以下操作之前部署安装 SSL 证书，并使用"),s("code",[t._v("https://<绑定网站的域名名称>/install")]),t._v("  进行访问。部署安装 SSL 证书详情操作请参考： "),s("a",{attrs:{href:"https://cloud.tencent.com/document/product/400/35244",target:"_blank",rel:"noopener noreferrer"}},[t._v("Nginx 服务器证书安装"),s("OutboundLink")],1),t._v("。")]),t._v(" "),s("li",[t._v("如需购买 SSL 证书，可参考 "),s("a",{attrs:{href:"https://cloud.tencent.com/document/product/400/7995",target:"_blank",rel:"noopener noreferrer"}},[t._v("SSL 证书购买流程"),s("OutboundLink")],1),t._v("，请根据您的实际情况进行购买相关证书。腾讯云为 Discuz! Q 站点提供免费 SSL 证书申请。详情请查看："),s("a",{attrs:{href:"https://cloud.tencent.com/document/product/400/6814",target:"_blank",rel:"noopener noreferrer"}},[t._v("域名型（DV）免费证书申请流程"),s("OutboundLink")],1)])])]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[s("p",[t._v("单击【下一步】，Discuz! Q 将自行进行站点检查。如有报错等问题，可参考 "),s("a",{attrs:{href:"https://discuzq.icu/docs/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("常见问题"),s("OutboundLink")],1),t._v(" 进行排查处理。")])]),t._v(" "),s("li",[s("p",[t._v("Discuz! Q 检查完成后，需配置网站相关信息。如下图所示：")])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://main.qcloudimg.com/raw/8e3ac52669180620b946750787b50c95.png",alt:""}})]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("站点名称")]),t._v("：请输入您的站点名称信息，可自定义。")]),t._v(" "),s("li",[s("strong",[t._v("MySQL 服务器地址")]),t._v("：请输入您的 MySQL 服务器地址。")]),t._v(" "),s("li",[s("strong",[t._v("数据库名称")]),t._v("：请输入您的数据库名称。")]),t._v(" "),s("li",[s("strong",[t._v("MySQL 用户名")]),t._v("：请输入您的数据库用户名。")]),t._v(" "),s("li",[s("strong",[t._v("MySQL 密码")]),t._v("：请输入您的数据库密码。")]),t._v(" "),s("li",[s("strong",[t._v("表前缀")]),t._v("：可选，可自定义数据库表前缀名称。默认不填。")]),t._v(" "),s("li",[s("strong",[t._v("设置管理员用户名")]),t._v("：请输入您 Discuz! Q 站点的管理员用户名。")]),t._v(" "),s("li",[s("strong",[t._v("设置管理员密码")]),t._v("：请输入您 Discuz! Q 站点的管理员密码。")]),t._v(" "),s("li",[s("strong",[t._v("管理员密码确认")]),t._v("：请再次输入您 Discuz! Q 站点的管理员密码。")])]),t._v(" "),s("ol",{attrs:{start:"4"}},[s("li",[t._v("单击【下一步】。即可完成 DIscuz！Q 的安装部署。")])]),t._v(" "),s("h4",{attrs:{id:"步骤六-添加计划任务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#步骤六-添加计划任务"}},[t._v("#")]),t._v(" 步骤六：添加计划任务")]),t._v(" "),s("p",[t._v("为保证 DIscuz！Q 站点功能的正常使用。您还需要在服务器添加计划任务。在终端中输入以下命令并执行。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("php <网站主目录>/disco schedule:run >> /dev/null 2>&1\n")])])]),s("h3",{attrs:{id:"caddy"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#caddy"}},[t._v("#")]),t._v(" Caddy")]),t._v(" "),s("h4",{attrs:{id:"操作场景-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#操作场景-3"}},[t._v("#")]),t._v(" 操作场景")]),t._v(" "),s("p",[t._v("本文档将指导您如何在已安装 Caddy 的 Linux 服务器上安装部署 Discuz! Q。")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("ul",[s("li",[t._v("若您已知晓如何安装部署 Discuz! Q，您可以直接"),s("a",{attrs:{href:"https://discuzq.icu",target:"_blank",rel:"noopener noreferrer"}},[t._v("单击此处"),s("OutboundLink")],1),t._v("下载 Discuz! Q 进行安装部署。")]),t._v(" "),s("li",[t._v("本文档以 Caddy 2.2.1 、PHP 7.3.25 、 CentOS 7.6 版本为例。")])])]),t._v(" "),s("h4",{attrs:{id:"前提条件-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前提条件-3"}},[t._v("#")]),t._v(" 前提条件")]),t._v(" "),s("ul",[s("li",[t._v("服务器已安装的 PHP 版本为 7.2.5 及以上(暂不推荐使用7.4)，数据库使用 MySQL 5.7.9 版本以上或 MariaDB 10.2 以上。")]),t._v(" "),s("li",[t._v("已成功登录 Linux 服务器。")])]),t._v(" "),s("h4",{attrs:{id:"操作步骤-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#操作步骤-3"}},[t._v("#")]),t._v(" 操作步骤")]),t._v(" "),s("h4",{attrs:{id:"步骤一-配置-php"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#步骤一-配置-php"}},[t._v("#")]),t._v(" 步骤一：配置 PHP")]),t._v(" "),s("h4",{attrs:{id:"安装扩展-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装扩展-3"}},[t._v("#")]),t._v(" 安装扩展")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("ul",[s("li",[t._v("Discuz! Q 依赖于 "),s("code",[t._v("BCMath")]),t._v(" "),s("code",[t._v("Ctype")]),t._v(" "),s("code",[t._v("Curl")]),t._v(" "),s("code",[t._v("Dom")]),t._v(" "),s("code",[t._v("Fileinfo")]),t._v(" "),s("code",[t._v("GD")]),t._v(" "),s("code",[t._v("JSON")]),t._v(" "),s("code",[t._v("Mbstring")]),t._v(" "),s("code",[t._v("Exif")]),t._v(" "),s("code",[t._v("OpenSSL")]),t._v(" "),s("code",[t._v("PDO")]),t._v(" "),s("code",[t._v("PDO_mysql")]),t._v(" "),s("code",[t._v("Tokenizer")]),t._v(" "),s("code",[t._v("XML")]),t._v(" "),s("code",[t._v("Zip")]),t._v(" 扩展插件，在 PHP 中需开启以上扩展。")]),t._v(" "),s("li",[t._v("以下操作因为系统版本，软件版本的不同，操作上会有所差异，请根据您的具体情况进行开启对应扩展，以下操作仅提供示例。")])])]),t._v(" "),s("ol",[s("li",[t._v("查看 "),s("code",[t._v("php")]),t._v(" 已安装扩展。在终端中，可以输入 "),s("code",[t._v("php -m")]),t._v(" 查看已安装扩展。")]),t._v(" "),s("li",[t._v("在终端中，您可以根据查询结果安装对应缺失的扩展。\n"),s("ul",[s("li",[t._v("如缺失"),s("code",[t._v("Exif")]),t._v("扩展。可以使用以下命令进行编译安装扩展 "),s("code",[t._v("Exif")]),t._v(" 扩展。")])])])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("以下路径仅提供示例。请根据实际情况进行输入。")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("# 使用 cd 命令进入 php 的源码的 exif 模块目录。\ncd /root/lnmp1.7/src/php-7.3.23/ext/exif/\n\n# 执行 phpize 脚本。\n/usr/local/php/bin/phpize\n\n# 编译配置。\n./configure --with-php-config=/usr/local/php/bin/php-config\n\n# 编译安装 exif 模块。\nmake && make install\n")])])]),s("ol",{attrs:{start:"3"}},[s("li",[t._v("配置 "),s("code",[t._v("php.ini")]),t._v(" 文件。可在终端中输入 "),s("code",[t._v("php --ini")]),t._v(" 查看 "),s("code",[t._v("php.ini")]),t._v(" 配置文件路径。如下图所示：")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://main.qcloudimg.com/raw/149f2f45d6c305fa8710fe265c6be57d.png",alt:""}})]),t._v(" "),s("ol",{attrs:{start:"4"}},[s("li",[t._v("您可通过 "),s("code",[t._v("vim")]),t._v(" 命令，或使用 WinSCP 工具，根据查询到的文件路径，打开并编辑 "),s("code",[t._v("php.ini")]),t._v(" 文件，去掉以下字段前面的 "),s("code",[t._v(";")]),t._v(" 分号，并保存 "),s("code",[t._v("php.ini")]),t._v("  文件。如下所示")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("extension=exif    \nexif.encode_unicode = ISO-8859-15\nexif.decode_unicode_motorola = UCS-2BE\nexif.decode_unicode_intel    = UCS-2LE\nexif.encode_jis =\nexif.decode_jis_motorola = JIS\nexif.decode_jis_intel    = JIS=\n")])])]),s("ol",{attrs:{start:"5"}},[s("li",[t._v("重启 PHP 与 Caddy 服务。"),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("您可以参考命令 "),s("code",[t._v("systemctl restart php-fpm")]),t._v(" 与 "),s("code",[t._v("systemctl restart caddy")]),t._v(" 重启 PHP 与 Caddy 服务。")])])])]),t._v(" "),s("h4",{attrs:{id:"安装-php-函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装-php-函数"}},[t._v("#")]),t._v(" 安装 PHP 函数")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("ul",[s("li",[t._v("Discuz! Q 依赖于 "),s("code",[t._v("symlink")]),t._v("、"),s("code",[t._v("readlink")]),t._v("、 "),s("code",[t._v("putenv")]),t._v("、 "),s("code",[t._v("realpath")]),t._v("、"),s("code",[t._v("shell_exec")]),t._v(" 函数，在 PHP 中需开启以上函数。")]),t._v(" "),s("li",[t._v("以下操作因为系统、软件版本的不同，操作上会有所差异，请根据您的具体情况进行开启对应函数，以下操作仅提供示例。")])])]),t._v(" "),s("ol",[s("li",[t._v("打开并编辑 "),s("code",[t._v("php.ini")]),t._v(" 文件。查找 "),s("code",[t._v("disable_functions")]),t._v(" 字段，并删除禁用掉的 "),s("code",[t._v("symlink")]),t._v("、"),s("code",[t._v("readlink")]),t._v("、 "),s("code",[t._v("putenv")]),t._v("、 "),s("code",[t._v("realpath")]),t._v("、"),s("code",[t._v("shell_exec")]),t._v(" 函数。如下所示：")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("disable_functions = passthru,exec,system,chroot,chgrp,chown,shell_exec,proc_open,proc_get_status,popen,ini_alter,ini_restore,dl,openlog,syslog,popepassthru,stream_socket_server\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[t._v("保存 "),s("code",[t._v("php.ini")]),t._v("文件,并重启 PHP 与 Caddy 服务。")])]),t._v(" "),s("h4",{attrs:{id:"步骤二-下载并解压-discuz-q-安装包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#步骤二-下载并解压-discuz-q-安装包"}},[t._v("#")]),t._v(" 步骤二：下载并解压 Discuz！Q 安装包")]),t._v(" "),s("ol",[s("li",[t._v("您可以通过以下命令在网站主目录下创建 Discuz！Q 网站目录并下载 Discuz！Q 安装包与解压至网站目录。")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("# 创建 Discuz！Q 网站目录，目录名可自定义，此处以 discuz 为例。\nmkdir discuz\n\n# 进入 discuz目录\ncd discuz\n\n#下载 Discuz！Q 安装包\nwget -c https://discuzq.icu\n\n# 解压 Discuz！Q 安装包\nunzip dzq_latest_install.zip\n")])])]),s("h4",{attrs:{id:"步骤三-配置-caddy"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#步骤三-配置-caddy"}},[t._v("#")]),t._v(" 步骤三：配置 Caddy")]),t._v(" "),s("ol",[s("li",[t._v("您可通过 "),s("code",[t._v("vim")]),t._v(" 命令，或使用 WinSCP 工具，打开 "),s("code",[t._v("Caddyfile")]),t._v(" 配置文件进行以下配置。")])]),t._v(" "),s("h4",{attrs:{id:"root-配置-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#root-配置-2"}},[t._v("#")]),t._v(" root 配置")]),t._v(" "),s("ol",[s("li",[t._v("请将"),s("code",[t._v("root")]),t._v("目录指向 "),s("code",[t._v("<站点主目录>/public")]),t._v("目录，配置请参考如下："),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("以下是示例，请按自己的实际配置设置。")])])])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("root * /var/www/discuz/public\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[s("p",[t._v("保存 "),s("code",[t._v("Caddyfile")]),t._v("文件，重启 Caddy 服务。")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("如果您使用的是  Ubuntu 系统，建议您将 "),s("code",[t._v("caddy.service")]),t._v("配置文件下的 "),s("code",[t._v("PrivateTmb")]),t._v("字段配置为"),s("code",[t._v("false")]),t._v("。否则可能导致访问 Discuz! Q 时 ，随机性产生 404 页面。")])])])]),t._v(" "),s("h4",{attrs:{id:"步骤四-初始化安装-discuz-q-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#步骤四-初始化安装-discuz-q-2"}},[t._v("#")]),t._v(" 步骤四：初始化安装 Discuz! Q")]),t._v(" "),s("ol",[s("li",[t._v("打开本地浏览器，访问 "),s("code",[t._v("http://<绑定网站的域名名称>/install")]),t._v(" 。如下图所示：")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://main.qcloudimg.com/raw/d571ed3234565af42c508666b827ca37.png",alt:""}})]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[s("p",[t._v("单击【下一步】，Discuz! Q 将自行进行站点检查，如有报错等问题。可参考 "),s("a",{attrs:{href:"https://discuzq.icu/docs/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("常见问题"),s("OutboundLink")],1),t._v(" 进行排查处理。")])]),t._v(" "),s("li",[s("p",[t._v("Discuz! Q 检查完成后，需配置网站相关信息。如下图所示：")])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://main.qcloudimg.com/raw/8e3ac52669180620b946750787b50c95.png",alt:""}})]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("站点名称")]),t._v("：请输入您的站点名称信息，可自定义。")]),t._v(" "),s("li",[s("strong",[t._v("MySQL 服务器地址")]),t._v("：请输入您的 MySQL 服务器地址。")]),t._v(" "),s("li",[s("strong",[t._v("数据库名称")]),t._v("：请输入您的数据库名称。")]),t._v(" "),s("li",[s("strong",[t._v("MySQL 用户名")]),t._v("：请输入您的数据库用户名。")]),t._v(" "),s("li",[s("strong",[t._v("MySQL 密码")]),t._v("：请输入您的数据库密码。")]),t._v(" "),s("li",[s("strong",[t._v("表前缀")]),t._v("：可选，可自定义数据库表前缀名称。默认不填。")]),t._v(" "),s("li",[s("strong",[t._v("设置管理员用户名")]),t._v("：请输入您 Discuz! Q 站点的管理员用户名。")]),t._v(" "),s("li",[s("strong",[t._v("设置管理员密码")]),t._v("：请输入您 Discuz! Q 站点的管理员密码。")]),t._v(" "),s("li",[s("strong",[t._v("管理员密码确认")]),t._v("：请再次输入您 Discuz! Q 站点的管理员密码。")])]),t._v(" "),s("ol",{attrs:{start:"4"}},[s("li",[t._v("单击【下一步】。即可完成 DIscuz！Q 的安装部署。")])]),t._v(" "),s("h4",{attrs:{id:"步骤五-添加计划任务-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#步骤五-添加计划任务-2"}},[t._v("#")]),t._v(" 步骤五：添加计划任务")]),t._v(" "),s("p",[t._v("为保证 DIscuz！Q 站点功能的正常使用。您还需要在服务器添加计划任务。在终端中输入以下命令并执行。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("php <网站主目录>/disco schedule:run >> /dev/null 2>&1\n")])])]),s("h2",{attrs:{id:"基于宝塔"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基于宝塔"}},[t._v("#")]),t._v(" 基于宝塔")]),t._v(" "),s("h4",{attrs:{id:"操作场景-4"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#操作场景-4"}},[t._v("#")]),t._v(" 操作场景")]),t._v(" "),s("p",[t._v("本文档将指导您如何在已安装宝塔面板的 Linux 服务器上安装部署 DIscuz！Q。")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("本文档以宝塔面板 7.3.0 版本、CentOS 7.6 系统为例。")])]),t._v(" "),s("h4",{attrs:{id:"前提条件-4"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前提条件-4"}},[t._v("#")]),t._v(" 前提条件")]),t._v(" "),s("ul",[s("li",[t._v("宝塔面板安装的 PHP 版本需为 7.2 及以上，MySQL 版本需要为 MySQL 5.7.9 及以上。")]),t._v(" "),s("li",[t._v("已成功登录宝塔控制台。")])]),t._v(" "),s("h4",{attrs:{id:"操作步骤-4"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#操作步骤-4"}},[t._v("#")]),t._v(" 操作步骤")]),t._v(" "),s("h4",{attrs:{id:"步骤一-配置php-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#步骤一-配置php-3"}},[t._v("#")]),t._v(" 步骤一：配置PHP")]),t._v(" "),s("h4",{attrs:{id:"安装扩展-4"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装扩展-4"}},[t._v("#")]),t._v(" 安装扩展")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("Discuz！Q 依赖于 "),s("code",[t._v("fileinfo")]),t._v(" 和 "),s("code",[t._v("exif")]),t._v(" 两个扩展运行，部署前需对 PHP 进行相关配置。以下操作将指导您安装"),s("code",[t._v("fileinfo")]),t._v(" 和"),s("code",[t._v("exif")]),t._v(" 扩展。")])]),t._v(" "),s("ol",[s("li",[t._v("在宝塔控制台中，单击【软件商城】->【已安装】，查找已安装的 PHP 软件。如下图所示：")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://main.qcloudimg.com/raw/63a722f7fd3a159978343331d14d9736.png",alt:""}})]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v("单击选择需要为 Discuz！Q 使用的 PHP 软件名称（需为7.2及以上）。此处以 PHP-7.2 为例。")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://main.qcloudimg.com/raw/b63aed08a014d1821f75281192561aad.png",alt:""}})]),t._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[t._v("在弹出的 【php 管理】窗口中，单击【安装扩展】，进行安装扩展设置。如下图所示")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://main.qcloudimg.com/raw/189db4e283e426bf9d704e647c3349e3.png",alt:""}})]),t._v(" "),s("ol",{attrs:{start:"4"}},[s("li",[t._v("选择【fileinfo】与【exif】，并单击【安装】。如下图所示：")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://main.qcloudimg.com/raw/35c37af44765699060f45a2b3f672df5.png",alt:""}})]),t._v(" "),s("ol",{attrs:{start:"5"}},[s("li",[t._v("在弹出的 "),s("code",[t._v("fileinfo")]),t._v(" 安装窗口中，单击【确定】。如下图所示：")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://main.qcloudimg.com/raw/17fec169be7dbcec963425ccf6742406.png",alt:""}})]),t._v(" "),s("ol",{attrs:{start:"6"}},[s("li",[t._v("php 管理窗口中【fileinfo】与【exif】状态栏显示为"),s("img",{attrs:{src:"https://main.qcloudimg.com/raw/6afdf7dacebf13ae1615976c36da021f.png",alt:""}}),t._v("即为安装成功。")])]),t._v(" "),s("h4",{attrs:{id:"删除禁用函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#删除禁用函数"}},[t._v("#")]),t._v(" 删除禁用函数")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("Discuz！Q 需删除禁用的函数 "),s("code",[t._v("putenv")]),t._v("、"),s("code",[t._v("readlink")]),t._v("、"),s("code",[t._v("symlink")]),t._v("、"),s("code",[t._v("shell_exec")]),t._v(" ，部署前需对 PHP 进行相关配置。以下操作将指导您删除禁用函数 "),s("code",[t._v("putenv")]),t._v("、"),s("code",[t._v("readlink")]),t._v("、"),s("code",[t._v("symlink")]),t._v("、"),s("code",[t._v("shell_exec")]),t._v(" 。")])]),t._v(" "),s("ol",[s("li",[t._v("在 【php 管理】窗口中，单击【禁用函数】，进入禁用函数设置页面。如下图所示：")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://main.qcloudimg.com/raw/0c31e34664a77eeb07cc3a517b19dae3.png",alt:""}})]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v("在函数列表中单击【删除】函数 "),s("code",[t._v("putenv")]),t._v("、"),s("code",[t._v("readlink")]),t._v("、"),s("code",[t._v("symlink")]),t._v("、"),s("code",[t._v("shell_exec")]),t._v(" ，即可删除禁用的函数。")])]),t._v(" "),s("h4",{attrs:{id:"步骤二-创建站点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#步骤二-创建站点"}},[t._v("#")]),t._v(" 步骤二：创建站点")]),t._v(" "),s("ol",[s("li",[t._v("在宝塔控制台中，单击【网站】->【添加站点】。如下图所示：")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://main.qcloudimg.com/raw/59f1d176aa8cd67b6fc21bea433e802a.png",alt:""}})]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v("在弹出的添加网站窗口中，输入相关配置信息。如下图所示：")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://main.qcloudimg.com/raw/e447eebc5b027ee24615721c18085d0c.png",alt:""}})]),t._v(" "),s("ul",[s("li",[t._v("域名：输入绑定 Discuz！Q 域名。"),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("确保绑定的域名已添加相关解析。如您的域名使用腾讯云 DNS 解析 DNSPod ，详情操作可参考："),s("a",{attrs:{href:"https://cloud.tencent.com/document/product/302/3446",target:"_blank",rel:"noopener noreferrer"}},[t._v("快速添加域名解析"),s("OutboundLink")],1),t._v("。")])])]),t._v(" "),s("li",[t._v("备注：可选，可添加网站的备注信息。")]),t._v(" "),s("li",[t._v("根目录：网站文件根目录。一般情况使用默认 "),s("code",[t._v("/www/wwwroot")]),t._v(" 路径。")]),t._v(" "),s("li",[t._v("FTP：可选，可创建 FTP 服务。默认不创建。")]),t._v(" "),s("li",[t._v("数据库：可选，您可在您的服务器内创建数据库进行使用。也可以其他数据库,数据库类型需为 MySQL 5.7.9 版本以上或 MariaDB 10.2 以上。如："),s("a",{attrs:{href:"https://cloud.tencent.com/product/cdb",target:"_blank",rel:"noopener noreferrer"}},[t._v("云数据库 TencentDB for MySQL"),s("OutboundLink")],1),t._v("。详情操作请参考："),s("a",{attrs:{href:"https://cloud.tencent.com/document/product/236",target:"_blank",rel:"noopener noreferrer"}},[t._v("云数据库 MySQL 产品文档"),s("OutboundLink")],1),t._v(" 。")])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("如需在服务器内创建数据库进行使用，请选择【MySQL】,【utf8mb4】，并输入数据库用户名以及密码。")])]),t._v(" "),s("ul",[s("li",[t._v("程序类型：PHP，默认不可选。")]),t._v(" "),s("li",[t._v("PHP版本：请选择已配置完成的 PHP 版本。")]),t._v(" "),s("li",[t._v("网站分类：默认分类。可根据实际情况进行选择。")])]),t._v(" "),s("p",[t._v("3.单击【提交】。即可创建站点。")]),t._v(" "),s("h4",{attrs:{id:"步骤三-远程下载-discuz-q-部署文件压缩包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#步骤三-远程下载-discuz-q-部署文件压缩包"}},[t._v("#")]),t._v(" 步骤三：远程下载 DIscuz！Q 部署文件压缩包")]),t._v(" "),s("ol",[s("li",[t._v("单击已创建的 Discuz！Q 根目录路径，如下图所示：")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://main.qcloudimg.com/raw/ee84ac3e473b5a2662a9d6d5a72748aa.png",alt:""}})]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v("在文件目录中，单击【远程下载】。在弹出的下载文件窗口中输入相关信息。如下图所示：")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://main.qcloudimg.com/raw/6a2de56d62244bc1a6b86dc8c1e1084b.png",alt:""}})]),t._v(" "),s("ul",[s("li",[t._v("URL地址：请输入 Discuz！Q 下载地址： "),s("code",[t._v("https://discuzq.icu")]),t._v("。")]),t._v(" "),s("li",[t._v("下载到：默认不修改。")]),t._v(" "),s("li",[t._v("文件名：默认不修改，输入下载路径后将自动进行填充。")])]),t._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[t._v("单击【确认】。系统将自行下载 DIscuz！Q 部署文件，请耐心等待。")])]),t._v(" "),s("h4",{attrs:{id:"步骤四-解压-discuz-q-部署文件压缩包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#步骤四-解压-discuz-q-部署文件压缩包"}},[t._v("#")]),t._v(" 步骤四：解压  DIscuz！Q 部署文件压缩包")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("选择已下载好 Discuz！Q 部署文件压缩包，并单击【解压】。如下图所示：\n"),s("img",{attrs:{src:"https://main.qcloudimg.com/raw/3c54e46dcc0e4b087d65f3c8b5ac6800.png",alt:""}})])]),t._v(" "),s("li",[s("p",[t._v("在弹出的解压文件窗口中，单击【解压】。如下图所示：")])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://main.qcloudimg.com/raw/27527d5113e8c2d6584e5bc2003402a7.png",alt:""}})]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("文件解压成功后，可自行删除 Discuz！Q 部署文件压缩包，不影响 Discuz！Q 的正常使用。")])]),t._v(" "),s("h4",{attrs:{id:"步骤五-修改网站配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#步骤五-修改网站配置"}},[t._v("#")]),t._v(" 步骤五：修改网站配置")]),t._v(" "),s("ol",[s("li",[t._v("在宝塔控制台中，单击【网站】，并选择已创建 Discuz！Q  站点，单击【设置】。如下图所示：")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://main.qcloudimg.com/raw/266a9747c34988e8c1c4c438b88793c9.png",alt:""}})]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v("在弹出的站点修改窗口中，单击【网站目录】，进行网站目录相关设置。如下图所示：")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://main.qcloudimg.com/raw/7da0693dcb1f6c27ce6f69ec2f50bbfb.png",alt:""}})]),t._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[t._v("运行目录勾选 "),s("code",[t._v("/public")]),t._v("。如下图所示:")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://main.qcloudimg.com/raw/30b5d8759e5d541e0c93170844bb3693.png",alt:""}})]),t._v(" "),s("ol",{attrs:{start:"4"}},[s("li",[t._v("单击【保存】。")])]),t._v(" "),s("h5",{attrs:{id:"配置伪静态"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置伪静态"}},[t._v("#")]),t._v(" 配置伪静态")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("如果使用 "),s("code",[t._v("Apache")]),t._v("服务，此步操作无需配置；如果使用 "),s("code",[t._v("Nginx")]),t._v(" 服务，请按照如下进行设置伪静态。")])]),t._v(" "),s("ol",[s("li",[t._v("进入【网站】，单击刚才添加站点，操作栏处【设置】。")]),t._v(" "),s("li",[t._v("弹出的【站点修改】窗口中，单击【伪静态】，将以下内容复制粘贴进去，并单击【保存】。")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("location / {\n  try_files $uri $uri/ /index.php?$query_string;\n}\n")])])]),s("h5",{attrs:{id:"设置-gzip"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设置-gzip"}},[t._v("#")]),t._v(" 设置 gzip")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("如果使用Apache服务，此步操作无需配置；如果使用 Nginx 服务，请按照如下进行设置 gzip。")])]),t._v(" "),s("ol",[s("li",[t._v("单击【软件商城】，并查找到您安装的 Nginx。")]),t._v(" "),s("li",[t._v("单击 Nginx 操作栏的【设置】。")]),t._v(" "),s("li",[t._v("在弹出的【nginx 管理】窗口中，单击【配置修改】。")]),t._v(" "),s("li",[t._v("在【配置修改】中查找到 "),s("code",[t._v("gzip_types")]),t._v(" 字段并在前端添加 "),s("code",[t._v("application/json")]),t._v(" 和末尾处添加 "),s("code",[t._v("application/vnd.api+json")]),t._v(" 代码。如下图所示：")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://main.qcloudimg.com/raw/74128e9f20252192ced5a0fc7a1e6ad4.png",alt:""}})]),t._v(" "),s("ol",{attrs:{start:"5"}},[s("li",[t._v("单击 【性能调整】，在 gzip 处选择【开启】。若已开启请忽略此步操作。")]),t._v(" "),s("li",[t._v("单击【保存】。重启 Nginx 服务。")])]),t._v(" "),s("h4",{attrs:{id:"步骤六-初始化安装-discuz-q"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#步骤六-初始化安装-discuz-q"}},[t._v("#")]),t._v(" 步骤六：初始化安装 Discuz! Q")]),t._v(" "),s("ol",[s("li",[t._v("打开本地浏览器，访问 "),s("code",[t._v("http://<绑定网站的域名名称>/install")]),t._v(" 。如下图所示：")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://main.qcloudimg.com/raw/d571ed3234565af42c508666b827ca37.png",alt:""}})]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("ul",[s("li",[t._v("站点如需部署 SSL 证书，使用 HTTPS 协议进行站点访问。请在以下操作之前部署安装 SSL 证书，并使用"),s("code",[t._v("https://<绑定网站的域名名称>/install")]),t._v("  进行访问。部署安装 SSL 证书详情操作请参考： "),s("a",{attrs:{href:"https://cloud.tencent.com/document/product/400/50874",target:"_blank",rel:"noopener noreferrer"}},[t._v("宝塔服务器证书安装"),s("OutboundLink")],1),t._v("。")]),t._v(" "),s("li",[t._v("如需购买 SSL 证书，可参考 "),s("a",{attrs:{href:"https://cloud.tencent.com/document/product/400/7995",target:"_blank",rel:"noopener noreferrer"}},[t._v("SSL 证书购买流程"),s("OutboundLink")],1),t._v("，请根据您的实际情况进行购买相关证书。腾讯云为 Discuz! Q 站点提供免费 SSL 证书申请。详情请查看："),s("a",{attrs:{href:"https://cloud.tencent.com/document/product/400/6814",target:"_blank",rel:"noopener noreferrer"}},[t._v("域名型（DV）免费证书申请流程"),s("OutboundLink")],1)])])]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[s("p",[t._v("单击【下一步】，Discuz! Q 将自行进行站点检查。如有报错等问题，请查看 "),s("a",{attrs:{href:"https://discuzq.icu/docs/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("常见问题"),s("OutboundLink")],1),t._v(" 进行排查处理。")])]),t._v(" "),s("li",[s("p",[t._v("Discuz! Q 检查完成后，需配置网站相关信息。如下图所示：")])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://main.qcloudimg.com/raw/8e3ac52669180620b946750787b50c95.png",alt:""}})]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("站点名称")]),t._v("：请输入您的站点名称信息，可自定义。")]),t._v(" "),s("li",[s("strong",[t._v("MySQL 服务器地址")]),t._v("：请输入您的 MySQL 服务器地址，如您使用宝塔创建的服务器本地数据库，请输入"),s("code",[t._v("127.0.0.1")]),t._v("即可。")]),t._v(" "),s("li",[s("strong",[t._v("数据库名称")]),t._v("：请输入您的数据库名称。如您使用宝塔创建的服务器本地数据库，可登录服务器的宝塔控制台，【数据库】进行查看。")]),t._v(" "),s("li",[s("strong",[t._v("MySQL 用户名")]),t._v("：请输入您的数据库用户名。如您使用宝塔创建的服务器本地数据库，可登录服务器的宝塔控制台，【数据库】进行查看。")]),t._v(" "),s("li",[s("strong",[t._v("MySQL 密码")]),t._v("：请输入您的数据库密码。如您使用宝塔创建的服务器本地数据库，可登录服务器的宝塔控制台，【数据库】进行查看。")]),t._v(" "),s("li",[s("strong",[t._v("表前缀")]),t._v("：可选，可自定义数据库表前缀名称。默认不填。")]),t._v(" "),s("li",[s("strong",[t._v("设置管理员用户名")]),t._v("：请输入您 Discuz! Q 站点的管理员用户名。")]),t._v(" "),s("li",[s("strong",[t._v("设置管理员密码")]),t._v("：请输入您 Discuz! Q 站点的管理员密码。")]),t._v(" "),s("li",[s("strong",[t._v("管理员密码确认")]),t._v("：请再次输入您 Discuz! Q 站点的管理员密码。")])]),t._v(" "),s("ol",{attrs:{start:"4"}},[s("li",[t._v("单击【下一步】。即可完成 DIscuz！Q 的安装部署。")])]),t._v(" "),s("h4",{attrs:{id:"步骤七-添加计划任务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#步骤七-添加计划任务"}},[t._v("#")]),t._v(" 步骤七：添加计划任务")]),t._v(" "),s("p",[t._v("为保证 DIscuz！Q 站点功能的正常使用。您还需要在宝塔面板中添加计划任务。")]),t._v(" "),s("ol",[s("li",[t._v("登录宝塔控制台，单击【计划任务】，进入计划任务页面，并选择与填写相关信息。如下图所示：")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://main.qcloudimg.com/raw/e7443e1378a3149d1de8108321b16e7e.png",alt:""}})]),t._v(" "),s("ul",[s("li",[t._v("任务类型：选择 Shell 脚本。")]),t._v(" "),s("li",[t._v("任务名称：可自定义，建议填写【Discuz！Q 计划任务】 便于区分。")]),t._v(" "),s("li",[t._v("执行周期：选择【N分钟】，并填写【1】分钟。")]),t._v(" "),s("li",[t._v("脚本内容：请输入以下命令，命令【网站主目录】请按实际情况做相应调整。")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("sudo -u www /usr/bin/php /www/wwwroot/<网站主目录>/disco schedule:run\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[t._v("单击【添加任务】。")])]),t._v(" "),s("h2",{attrs:{id:"基于-docker-容器-推荐"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基于-docker-容器-推荐"}},[t._v("#")]),t._v(" 基于 Docker 容器 （推荐）")]),t._v(" "),s("h4",{attrs:{id:"操作场景-5"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#操作场景-5"}},[t._v("#")]),t._v(" 操作场景")]),t._v(" "),s("p",[t._v("本文档将指导您如何在已安装 docker-ce 运行环境的 Linux 服务器上安装部署 Discuz! Q。")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("如果您的服务器还未安装 docker-ce 运行环境，腾讯云提供了 "),s("a",{attrs:{href:"https://mirrors.tencent.com/docker-ce/",target:"_blank",rel:"noopener noreferrer"}},[t._v("docker 镜像"),s("OutboundLink")],1),t._v("，您可直接下载安装。")])]),t._v(" "),s("h4",{attrs:{id:"前提条件-5"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前提条件-5"}},[t._v("#")]),t._v(" 前提条件")]),t._v(" "),s("p",[t._v("已成功登录 Linux 服务器。")]),t._v(" "),s("h4",{attrs:{id:"操作步骤-5"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#操作步骤-5"}},[t._v("#")]),t._v(" 操作步骤")]),t._v(" "),s("h4",{attrs:{id:"步骤一-安装-discuz-q"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#步骤一-安装-discuz-q"}},[t._v("#")]),t._v(" 步骤一：安装 Discuz! Q")]),t._v(" "),s("ol",[s("li",[t._v("在终端中，请输入以下命令。docker 将会自动下载并运行最新版本的 Discuz! Q。如下所示：")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("docker run -d -p 80:80 -p 443:443 ccr.ccs.tencentyun.com/discuzq/dzq:latest\n")])])]),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),s("ul",[s("li",[t._v("容器基于 Ubuntu 18.04，其中已安装 Nginx 1.14, PHP 7.2, MySQL 5.7 和所有的相关依赖，并且已经完成 Web 服务器配置和计划任务配置。")]),t._v(" "),s("li",[t._v("安装时警告 "),s("code",[t._v("WARNING: IPv4 forwarding is disabled. Networking will not work.")]),t._v("。可使用命令 "),s("code",[t._v("vim /etc/sysctl.conf")]),t._v(" 编辑配置文件。修改 "),s("code",[t._v("net.ipv4.ip_forward")]),t._v("字段值为 "),s("code",[t._v("1")]),t._v(" 开启转发并使用命令 "),s("code",[t._v("systemctl restart network")]),t._v(" 重启网络服务。")]),t._v(" "),s("li",[t._v("以上命令用于快速启动并测试 Discuz! Q，数据库和站点数据都将保存在容器内部，容器被删除将会造成数据丢失。")]),t._v(" "),s("li",[t._v("如果您想基于容器长期运行Discuz! Q，建议将数据库和站点数据保存于容器外部，请参考"),s("a",{attrs:{href:"https://discuzq.icu/docs/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.html#%E5%AE%B9%E5%99%A8%E7%9A%84%E6%9B%B4%E5%A4%9A%E9%85%8D%E7%BD%AE%E8%AF%B4%E6%98%8E",target:"_blank",rel:"noopener noreferrer"}},[t._v("容器的更多配置说明进行配置"),s("OutboundLink")],1),t._v("。")])])]),t._v(" "),s("h4",{attrs:{id:"步骤二-初始化安装-discuz-q"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#步骤二-初始化安装-discuz-q"}},[t._v("#")]),t._v(" 步骤二：初始化安装 Discuz! Q")]),t._v(" "),s("ol",[s("li",[t._v("打开本地浏览器，访问 "),s("code",[t._v("http://<服务器外网 IP 地址>/install")]),t._v(" 并配置网站相关信息。如下图所示：")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s3.jpg.cm/2021/01/17/wE3Fu.png",alt:""}})]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("站点名称")]),t._v("：请输入您的站点名称信息，可自定义。")]),t._v(" "),s("li",[s("strong",[t._v("MySQL Host")]),t._v("：请输入您的 MySQL 服务器地址，如您使用 docker 创建的本地数据库，请输入"),s("code",[t._v("127.0.0.1")]),t._v("即可。")]),t._v(" "),s("li",[s("strong",[t._v("MySQL 数据库")]),t._v("：请输入您的数据库名称。如您使用 docker 创建的本地数据库，请输入"),s("code",[t._v("root")]),t._v("即可。")]),t._v(" "),s("li",[s("strong",[t._v("MySQL 用户名")]),t._v("：请输入您的数据库用户名。如您使用 docker 创建的本地数据库，请输入"),s("code",[t._v("root")]),t._v("即可。")]),t._v(" "),s("li",[s("strong",[t._v("MySQL 密码")]),t._v("：如您使用 docker 创建的本地数据库，请输入"),s("code",[t._v("root")]),t._v("即可。")]),t._v(" "),s("li",[s("strong",[t._v("表前缀")]),t._v("：可选，可自定义数据库表前缀名称。默认不填。")]),t._v(" "),s("li",[s("strong",[t._v("管理员 用户名")]),t._v("：请输入您 Discuz! Q 站点的管理员用户名。")]),t._v(" "),s("li",[s("strong",[t._v("管理员 密码")]),t._v("：请输入您 Discuz! Q 站点的管理员密码。")]),t._v(" "),s("li",[s("strong",[t._v("管理员 确认密码")]),t._v("：请再次输入您 Discuz! Q 站点的管理员密码。")])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("ul",[s("li",[t._v("如果您想基于容器长期运行 Discuz! Q，建议将数据库和站点数据保存于容器外部，请参考 "),s("a",{attrs:{href:"https://discuzq.icu/docs/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.html#%E5%AE%B9%E5%99%A8%E7%9A%84%E6%9B%B4%E5%A4%9A%E9%85%8D%E7%BD%AE%E8%AF%B4%E6%98%8E",target:"_blank",rel:"noopener noreferrer"}},[t._v("容器的更多配置说明进行配置"),s("OutboundLink")],1),t._v("。")])])]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v("单击【安装】。即可完成 DIscuz！Q 的安装部署。")])]),t._v(" "),s("h4",{attrs:{id:"步骤三-系统管理与配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#步骤三-系统管理与配置"}},[t._v("#")]),t._v(" 步骤三：系统管理与配置")]),t._v(" "),s("p",[t._v("安装完成后，您可以访问 "),s("code",[t._v("http://<服务器外网 IP 地址>/admin")]),t._v(" 进入后台，输入在安装的时候设置的管理员账号和密码，进行管理与配置。")])])}),[],!1,null,null,null);s.default=v.exports}}]);