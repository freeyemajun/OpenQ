(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{229:function(t,e,s){"use strict";s.r(e);var _=s(6),a=Object(_.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"windows-主机安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#windows-主机安装"}},[t._v("#")]),t._v(" Windows 主机安装")]),t._v(" "),e("h2",{attrs:{id:"基于手动配置的环境"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#基于手动配置的环境"}},[t._v("#")]),t._v(" 基于手动配置的环境")]),t._v(" "),e("h3",{attrs:{id:"apache"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#apache"}},[t._v("#")]),t._v(" Apache")]),t._v(" "),e("h4",{attrs:{id:"操作场景"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#操作场景"}},[t._v("#")]),t._v(" 操作场景")]),t._v(" "),e("p",[t._v("本文档将指导您如何在已安装 Apache 服务与 PHP 的 Windows Server 服务器上安装部署 Discuz! Q。")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("ul",[e("li",[t._v("若您已知晓如何安装部署 Discuz! Q，您可以直接"),e("a",{attrs:{href:"https://discuzq.icu",target:"_blank",rel:"noopener noreferrer"}},[t._v("单击此处"),e("OutboundLink")],1),t._v("下载 Discuz! Q 进行安装部署。")]),t._v(" "),e("li",[t._v("本文档以 Apache 2.4 、PHP 7.3.1  版本为例。系统为 Windows Server 2016 。")])])]),t._v(" "),e("h4",{attrs:{id:"前提条件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#前提条件"}},[t._v("#")]),t._v(" 前提条件")]),t._v(" "),e("ul",[e("li",[t._v("服务器已安装的 PHP 版本为 7.2 及以上(暂不推荐使用7.4)，数据库使用 MySQL 5.7.9 版本以上或 MariaDB 10.2 以上。")]),t._v(" "),e("li",[t._v("已成功登录 Windows Server 服务器。")])]),t._v(" "),e("h4",{attrs:{id:"操作步骤"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#操作步骤"}},[t._v("#")]),t._v(" 操作步骤")]),t._v(" "),e("h4",{attrs:{id:"步骤一-配置php"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步骤一-配置php"}},[t._v("#")]),t._v(" 步骤一：配置PHP")]),t._v(" "),e("p",[e("strong",[t._v("安装扩展")])]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("ul",[e("li",[t._v("Discuz! Q 依赖于 "),e("code",[t._v("BCMath")]),t._v(" "),e("code",[t._v("Ctype")]),t._v(" "),e("code",[t._v("Curl")]),t._v(" "),e("code",[t._v("Dom")]),t._v(" "),e("code",[t._v("Fileinfo")]),t._v(" "),e("code",[t._v("GD")]),t._v(" "),e("code",[t._v("JSON")]),t._v(" "),e("code",[t._v("Mbstring")]),t._v(" "),e("code",[t._v("Exif")]),t._v(" "),e("code",[t._v("OpenSSL")]),t._v(" "),e("code",[t._v("PDO")]),t._v(" "),e("code",[t._v("PDO_mysql")]),t._v(" "),e("code",[t._v("Tokenizer")]),t._v(" "),e("code",[t._v("XML")]),t._v(" "),e("code",[t._v("Zip")]),t._v("扩展插件，在 PHP 中需开启以上扩展。")]),t._v(" "),e("li",[t._v("以下操作因为系统版本，软件版本的不同，操作上会有所差异，请根据您的具体情况进行开启对应函数，以下操作仅提供示例。")])])]),t._v(" "),e("p",[e("strong",[t._v("开启 exif 扩展:")])]),t._v(" "),e("ol",[e("li",[t._v("您可以使用文本编辑器，打开 "),e("code",[t._v("php.ini")]),t._v("文件。")]),t._v(" "),e("li",[t._v("编辑 "),e("code",[t._v("php.ini")]),t._v("  文件，去掉以下字段前面的 "),e("code",[t._v(";")]),t._v("分号，并保存 "),e("code",[t._v("php.ini")]),t._v("  文件。如下：")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("extension=exif    \nexif.encode_unicode = ISO-8859-15\nexif.decode_unicode_motorola = UCS-2BE\nexif.decode_unicode_intel    = UCS-2LE\nexif.encode_jis =\nexif.decode_jis_motorola = JIS\nexif.decode_jis_intel    = JIS=\n")])])]),e("ol",{attrs:{start:"3"}},[e("li",[t._v("重启 Apache 与 PHP 服务。")])]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("重启后如果扩展不生效，请确保 "),e("code",[t._v("php")]),t._v(" 目录下 "),e("code",[t._v("ext")]),t._v(" 文件夹具备对应扩展文件，"),e("code",[t._v("extension_dir")]),t._v("指向 "),e("code",[t._v("ext")]),t._v("文件夹并已去掉字段前 "),e("code",[t._v(";")]),t._v(" 分号。如： "),e("code",[t._v('extension_dir = "C:\\Program Files\\php-7.3.1\\ext"')]),t._v(" 。")])]),t._v(" "),e("p",[e("strong",[t._v("启用 PHP 函数")])]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("ul",[e("li",[t._v("Discuz！Q 依赖于 "),e("code",[t._v("symlink")]),t._v("、"),e("code",[t._v("readlink")]),t._v("、"),e("code",[t._v("putenv")]),t._v("、"),e("code",[t._v("realpath")]),t._v("、"),e("code",[t._v("shell_exec")]),t._v(" 函数，在PHP中需开启以上函数。")]),t._v(" "),e("li",[t._v("以下操作因为系统版本，软件版本的不同，操作上和命令上会有所差异，请根据您的具体情况开启对应函数 ，以下操作仅提供示例。")])])]),t._v(" "),e("ol",[e("li",[t._v("打开并编辑 "),e("code",[t._v("php.ini")]),t._v("文件。查找 "),e("code",[t._v("disable_functions")]),t._v("字段，并删除禁用掉的"),e("code",[t._v("symlink")]),t._v("、"),e("code",[t._v("readlink")]),t._v("、 "),e("code",[t._v("putenv")]),t._v("、 "),e("code",[t._v("realpath")]),t._v("、"),e("code",[t._v("shell_exec")]),t._v(" 函数。如下所示：")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("disable_functions = passthru,exec,system,chroot,chgrp,chown,shell_exec,proc_open,proc_get_status,popen,ini_alter,ini_restore,dl,openlog,syslog,popepassthru,stream_socket_server\n")])])]),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("如果"),e("code",[t._v("disable_functions")]),t._v("字段中已删除对应函数，可忽略此操作。")])]),t._v(" "),e("ol",{attrs:{start:"2"}},[e("li",[t._v("保存 "),e("code",[t._v("php.ini")]),t._v("文件。重启 Apache 与 PHP 服务。")])]),t._v(" "),e("h4",{attrs:{id:"步骤二-配置-apache"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步骤二-配置-apache"}},[t._v("#")]),t._v(" 步骤二：配置 Apache")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("ul",[e("li",[t._v("Discuz！Q 依赖于 "),e("code",[t._v("mod_rewrit")]),t._v(" 模块。请确保已经启用 "),e("code",[t._v("mod_rewrite")]),t._v("，以下操作将指导您启动 "),e("code",[t._v("mod_rewrite")]),t._v("。")]),t._v(" "),e("li",[t._v("以下操作因为系统版本，软件版本的不同，操作上和命令上会有所差异，请根据您的具体情况开启 "),e("code",[t._v("mod_rewrite")]),t._v(" ，以下操作仅提供示例。")])])]),t._v(" "),e("p",[e("strong",[t._v("启用 mod_rewrite")])]),t._v(" "),e("ol",[e("li",[t._v("可以在 "),e("code",[t._v("conf")]),t._v(" 目录的 "),e("code",[t._v("httpd.conf")]),t._v(" 文件中，查找以下字段，并去掉字段前"),e("code",[t._v("#")]),t._v(" 符号。如下所示：")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("LoadModule rewrite_module modules/mod_rewrite.so\n")])])]),e("ol",{attrs:{start:"2"}},[e("li",[t._v("定位到 "),e("code",[t._v("<directory />")]),t._v(" 字段，并修改内容为如下内容：")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("<directory />\n        Options All\n        AllowOverride All\n        DirectoryIndex index.php index.html\n</directory>\n")])])]),e("ol",{attrs:{start:"3"}},[e("li",[t._v("保存 "),e("code",[t._v("php.ini")]),t._v("文件并重启 Apache 服务。")])]),t._v(" "),e("h4",{attrs:{id:"步骤三-下载并解压-discuz-q-安装包"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步骤三-下载并解压-discuz-q-安装包"}},[t._v("#")]),t._v(" 步骤三：下载并解压 Discuz！Q 安装包")]),t._v(" "),e("ol",[e("li",[t._v("您可以通过服务器中的浏览器使用下载地址 "),e("code",[t._v("https://discuzq.icu")]),t._v(" 下载 Discuz！Q 安装包，并解压至于网站目录。如下图所示：")])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://main.qcloudimg.com/raw/b05fac26796c9325836cd4ada9ca86f1.png",alt:"img"}})]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("该网站目录仅提供示例，请根据自己的环境与实际需求将 Discuz！Q 安装包解压至对应文件夹，一般为"),e("code",[t._v("www")]),t._v("文件夹。")])]),t._v(" "),e("p",[e("strong",[t._v("步骤四：配置运行目录")])]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("完成以上配置后，您还需将运行目录设置为 Discuz！Q 网站文件的子目录的 "),e("code",[t._v("public")]),t._v(" 文件夹。")])]),t._v(" "),e("li",[e("p",[t._v("以下 "),e("code",[t._v("public")]),t._v(" 目录路径，仅提供示例，请根据自己的实际情况进行填写。")])])])]),t._v(" "),e("p",[t._v("打开并编辑 "),e("code",[t._v("php.ini")]),t._v("文件。查找 "),e("code",[t._v("DocumentRoot")]),t._v("字段，将运行目录设置为 Discuz！Q 网站文件的子目录的"),e("code",[t._v("public")]),t._v("文件夹。如下所示：")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('DocumentRoot "C:\\Program Files\\www\\public"\n')])])]),e("h4",{attrs:{id:"步骤五-初始化安装-discuz-q"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步骤五-初始化安装-discuz-q"}},[t._v("#")]),t._v(" 步骤五：初始化安装 Discuz! Q")]),t._v(" "),e("ol",[e("li",[t._v("打开本地浏览器，访问 "),e("code",[t._v("http://<绑定网站的域名名称>/install")]),t._v(" 。如下图所示：")])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://main.qcloudimg.com/raw/d571ed3234565af42c508666b827ca37.png",alt:"img"}})]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("ul",[e("li",[t._v("站点如需部署 SSL 证书，使用 HTTPS 协议进行站点访问。建议您在以下操作之前部署安装 SSL 证书，并使用"),e("code",[t._v("https://<绑定网站的域名名称>/dl.php")]),t._v("  进行访问。部署安装 SSL 证书详情操作请参考： "),e("a",{attrs:{href:"https://cloud.tencent.com/document/product/400/35243",target:"_blank",rel:"noopener noreferrer"}},[t._v("Apache 服务器证书安装"),e("OutboundLink")],1),t._v("。")]),t._v(" "),e("li",[t._v("如需购买 SSL 证书，可参考 "),e("a",{attrs:{href:"https://cloud.tencent.com/document/product/400/7995",target:"_blank",rel:"noopener noreferrer"}},[t._v("SSL 证书购买流程"),e("OutboundLink")],1),t._v("，请根据您的实际情况进行购买相关证书。腾讯云为 Discuz! Q 站点提供免费 SSL 证书申请。详情请查看："),e("a",{attrs:{href:"https://cloud.tencent.com/document/product/400/6814",target:"_blank",rel:"noopener noreferrer"}},[t._v("域名型（DV）免费证书申请流程"),e("OutboundLink")],1)])])]),t._v(" "),e("ol",{attrs:{start:"2"}},[e("li",[t._v("单击【下一步】，Discuz! Q 将自行进行站点检查。如有报错等问题，可参考 "),e("a",{attrs:{href:"https://discuz.com/docs/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("常见问题"),e("OutboundLink")],1),t._v(" 进行排查处理。")]),t._v(" "),e("li",[t._v("Discuz! Q 检查完成后，需配置网站相关信息。如下图所示：")])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://main.qcloudimg.com/raw/8e3ac52669180620b946750787b50c95.png",alt:"img"}})]),t._v(" "),e("ul",[e("li",[e("p",[e("strong",[t._v("站点名称")]),t._v("：请输入您的站点名称信息，可自定义。")])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("MySQL 服务器地址")]),t._v("：请输入您的 MySQL 服务器地址。")])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("数据库名称")]),t._v("：请输入您的数据库名称。")])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("MySQL 用户名")]),t._v("：请输入您的数据库用户名。")])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("MySQL 密码")]),t._v("：请输入您的数据库密码。")])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("表前缀")]),t._v("：可选，可自定义数据库表前缀名称。默认不填。")])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("设置管理员用户名")]),t._v("：请输入您 Discuz! Q 站点的管理员用户名。")])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("设置管理员密码")]),t._v("：请输入您 Discuz! Q 站点的管理员密码。")])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("管理员密码确认")]),t._v("：请再次输入您 Discuz! Q 站点的管理员密码。")])])]),t._v(" "),e("ol",{attrs:{start:"4"}},[e("li",[t._v("单击【下一步】。即可完成 DIscuz！Q 的安装部署。")])]),t._v(" "),e("h4",{attrs:{id:"步骤七-添加计划任务"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步骤七-添加计划任务"}},[t._v("#")]),t._v(" 步骤七：添加计划任务")]),t._v(" "),e("p",[t._v("为保证 DIscuz！Q 站点功能的正常使用。请添加一个每分钟运行一次的计划任务，脚本内容为以下命令。其中的 "),e("code",[t._v("PHP文件目录")]),t._v(" 和 "),e("code",[t._v("网站主目录")]),t._v(" 请按自己的实际情况做相应调整。")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("c:\\<PHP文件目录>\\php.exe c:\\<网站主目录>\\disco schedule:run\n")])])]),e("h3",{attrs:{id:"nginx"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#nginx"}},[t._v("#")]),t._v(" Nginx")]),t._v(" "),e("h4",{attrs:{id:"操作场景-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#操作场景-2"}},[t._v("#")]),t._v(" 操作场景")]),t._v(" "),e("p",[t._v("本文档将指导您如何在已安装 Nginx 服务的 Windows Server 服务器上安装部署 Discuz! Q。")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("ul",[e("li",[t._v("若您已知晓如何安装部署 Discuz! Q，您可以直接"),e("a",{attrs:{href:"https://discuzq.icu",target:"_blank",rel:"noopener noreferrer"}},[t._v("单击此处"),e("OutboundLink")],1),t._v("下载 Discuz! Q 进行安装部署。")]),t._v(" "),e("li",[t._v("本文档以 Nginx 1.18.0 、PHP 7.3.1  版本为例。系统为 Windows Server 2016 。")])])]),t._v(" "),e("h4",{attrs:{id:"前提条件-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#前提条件-2"}},[t._v("#")]),t._v(" 前提条件")]),t._v(" "),e("ul",[e("li",[t._v("服务器已安装的 PHP 版本为 7.2 及以上(暂不推荐使用7.4)，数据库使用 MySQL 5.7.9 版本以上或 MariaDB 10.2 以上。")]),t._v(" "),e("li",[t._v("已成功登录 Windows Server 服务器。")])]),t._v(" "),e("h4",{attrs:{id:"操作步骤-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#操作步骤-2"}},[t._v("#")]),t._v(" 操作步骤")]),t._v(" "),e("h4",{attrs:{id:"步骤一-配置php-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步骤一-配置php-2"}},[t._v("#")]),t._v(" 步骤一：配置PHP")]),t._v(" "),e("p",[e("strong",[t._v("安装扩展")])]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("ul",[e("li",[t._v("Discuz! Q 依赖于 "),e("code",[t._v("BCMath")]),t._v(" "),e("code",[t._v("Ctype")]),t._v(" "),e("code",[t._v("Curl")]),t._v(" "),e("code",[t._v("Dom")]),t._v(" "),e("code",[t._v("Fileinfo")]),t._v(" "),e("code",[t._v("GD")]),t._v(" "),e("code",[t._v("JSON")]),t._v(" "),e("code",[t._v("Mbstring")]),t._v(" "),e("code",[t._v("Exif")]),t._v(" "),e("code",[t._v("OpenSSL")]),t._v(" "),e("code",[t._v("PDO")]),t._v(" "),e("code",[t._v("PDO_mysql")]),t._v(" "),e("code",[t._v("Tokenizer")]),t._v(" "),e("code",[t._v("XML")]),t._v(" "),e("code",[t._v("Zip")]),t._v("扩展插件，在 PHP 中需开启以上扩展。")]),t._v(" "),e("li",[t._v("以下操作因为系统版本，软件版本的不同，操作上会有所差异，请根据您的具体情况进行开启对应函数，以下操作仅提供示例。")])])]),t._v(" "),e("p",[e("strong",[t._v("开启 exif 扩展:")])]),t._v(" "),e("ol",[e("li",[t._v("您可以使用文本编辑器，打开"),e("code",[t._v("php.ini")]),t._v("文件。")]),t._v(" "),e("li",[t._v("编辑"),e("code",[t._v("php.ini")]),t._v(" 文件，去掉以下字段前面的"),e("code",[t._v(";")]),t._v("分号，并保存"),e("code",[t._v("php.ini")]),t._v(" 文件。如下：")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("extension=exif    \nexif.encode_unicode = ISO-8859-15\nexif.decode_unicode_motorola = UCS-2BE\nexif.decode_unicode_intel    = UCS-2LE\nexif.encode_jis =\nexif.decode_jis_motorola = JIS\nexif.decode_jis_intel    = JIS=\n")])])]),e("ol",{attrs:{start:"3"}},[e("li",[t._v("重启 Nginx 与 PHP 服务。")])]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("重启后如果扩展不生效，请确保 PHP 目录下"),e("code",[t._v("ext")]),t._v(" 文件夹具备对应扩展文件，"),e("code",[t._v("extension_dir")]),t._v("指向"),e("code",[t._v("ext")]),t._v("文件夹并已去掉字段前"),e("code",[t._v(";")]),t._v("分号。如："),e("code",[t._v('extension_dir = "C:\\Program Files\\php-7.3.1\\ext"')]),t._v("。")])]),t._v(" "),e("p",[e("strong",[t._v("启用 PHP 函数")])]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("ul",[e("li",[t._v("Discuz！Q 依赖于 "),e("code",[t._v("symlink")]),t._v("、"),e("code",[t._v("readlink")]),t._v("、"),e("code",[t._v("putenv")]),t._v("、"),e("code",[t._v("realpath")]),t._v("、"),e("code",[t._v("shell_exec")]),t._v(" 函数，在 PHP 中需开启以上函数。")]),t._v(" "),e("li",[t._v("以下操作因为系统版本，软件版本的不同，操作上和命令上会有所差异，请根据您的具体情况开启对应函数 ，以下操作仅提供示例。")])])]),t._v(" "),e("ol",[e("li",[t._v("打开并编辑 "),e("code",[t._v("php.ini")]),t._v("文件。查找 "),e("code",[t._v("disable_functions")]),t._v("字段，并删除禁用掉的"),e("code",[t._v("symlink")]),t._v("、"),e("code",[t._v("readlink")]),t._v("、 "),e("code",[t._v("putenv")]),t._v("、 "),e("code",[t._v("realpath")]),t._v("、 "),e("code",[t._v("shell_exec")]),t._v(" 函数。如下所示：")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("disable_functions = passthru,exec,system,chroot,chgrp,chown,shell_exec,proc_open,proc_get_status,popen,ini_alter,ini_restore,dl,openlog,syslog,popepassthru,stream_socket_server\n")])])]),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("如果"),e("code",[t._v("disable_functions")]),t._v("字段中已删除对应函数，可忽略此操作。")])]),t._v(" "),e("ol",{attrs:{start:"2"}},[e("li",[t._v("保存 "),e("code",[t._v("php.ini")]),t._v(" 文件并重启 Nginx 与 PHP 服务。")])]),t._v(" "),e("h4",{attrs:{id:"步骤二-配置-nginx"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步骤二-配置-nginx"}},[t._v("#")]),t._v(" 步骤二：配置 Nginx")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("进入 "),e("code",[t._v("nginx")]),t._v(" 目录下 "),e("code",[t._v("conf")]),t._v(" 目录，并找到 "),e("code",[t._v("nginx.conf")]),t._v("配置文件。如下图所示： "),e("img",{attrs:{src:"https://main.qcloudimg.com/raw/6f589a23079fdf7a01793bad144c8010.png",alt:"img"}})])]),t._v(" "),e("li",[e("p",[t._v("使用文本编辑器打开 "),e("code",[t._v("nginx.conf")]),t._v(" 配置文件并进行以下配置。")])])]),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),e("p",[t._v("Nginx 必须包含以下配置。")])]),t._v(" "),e("p",[t._v("请将"),e("code",[t._v("root")]),t._v("目录指向 "),e("code",[t._v("<站点主目录>/public")]),t._v("目录，同时一定要配置"),e("code",[t._v("index")]),t._v("和 "),e("code",[t._v("location /")]),t._v("，将所有的请求将引导到 "),e("code",[t._v("index.php")]),t._v(" 。具体配置请参考如下：")]),t._v(" "),e("h4",{attrs:{id:"root-配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#root-配置"}},[t._v("#")]),t._v(" root 配置")]),t._v(" "),e("p",[t._v("请确认 "),e("code",[t._v("root")]),t._v(" 指向了安装好的 "),e("code",[t._v("public")]),t._v("目录，以下是示例，请按自己的实际配置设置。")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("root /home/www/discuz/public;\n")])])]),e("h4",{attrs:{id:"index-配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#index-配置"}},[t._v("#")]),t._v(" index 配置")]),t._v(" "),e("p",[t._v("请确认 index 的第一项是 index.php ，以下为示例。")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("index index.php index.html;\n")])])]),e("h4",{attrs:{id:"location-配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#location-配置"}},[t._v("#")]),t._v(" location 配置")]),t._v(" "),e("p",[t._v("请确认\t"),e("code",[t._v("location /")]),t._v(" 按如下配置，如果之前有相关配置，请替换：")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("    location / {\n        try_files $uri $uri/ /index.php?$query_string;\n    }\n")])])]),e("h4",{attrs:{id:"nginx-建议配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#nginx-建议配置"}},[t._v("#")]),t._v(" Nginx 建议配置")]),t._v(" "),e("p",[t._v("建议添加以下配置，以启用 gzip 压缩,减少服务器资源损耗。")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('  gzip on;\n  gzip_min_length 1024;\n  gzip_types application/json text/html text/css application/x-javascript application/javascript application/vnd.api+json;\n  gzip_disable "MSIE [1-6]\\.";\n  gzip_comp_level 2;\n')])])]),e("p",[t._v("3 .  重启 Nginx 服务。")]),t._v(" "),e("h4",{attrs:{id:"步骤三-下载并解压-discuz-q-安装包-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步骤三-下载并解压-discuz-q-安装包-2"}},[t._v("#")]),t._v(" 步骤三：下载并解压 Discuz！Q 安装包")]),t._v(" "),e("ol",[e("li",[t._v("您可以通过服务器中的浏览器使用下载地址 "),e("code",[t._v("https://discuzq.icu")]),t._v(" 下载 Discuz！Q 安装包，并解压至于网站目录。如下图所示： "),e("img",{attrs:{src:"https://main.qcloudimg.com/raw/b05fac26796c9325836cd4ada9ca86f1.png",alt:"img"}})])]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("该网站目录仅提供示例，请根据自己的环境与实际需求将 Discuz！Q 安装包解压至对应文件夹，一般为"),e("code",[t._v("www")]),t._v("文件。")])]),t._v(" "),e("h4",{attrs:{id:"步骤四-初始化安装-discuz-q"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步骤四-初始化安装-discuz-q"}},[t._v("#")]),t._v(" 步骤四：初始化安装 Discuz! Q")]),t._v(" "),e("ol",[e("li",[t._v("打开本地浏览器，访问 "),e("code",[t._v("http://<绑定网站的域名名称>/install")]),t._v(" 。如下图所示：")])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://main.qcloudimg.com/raw/d571ed3234565af42c508666b827ca37.png",alt:"img"}})]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("ul",[e("li",[t._v("站点如需部署 SSL 证书，使用 HTTPS 协议进行站点访问。请在以下操作之前部署安装 SSL 证书，并使用"),e("code",[t._v("https://<绑定网站的域名名称>/dl.php")]),t._v("  进行访问。部署安装 SSL 证书详情操作请参考： "),e("a",{attrs:{href:"https://cloud.tencent.com/document/product/400/35243",target:"_blank",rel:"noopener noreferrer"}},[t._v("Apache 服务器证书安装"),e("OutboundLink")],1),t._v("。")]),t._v(" "),e("li",[t._v("如需购买 SSL 证书，可参考 "),e("a",{attrs:{href:"https://cloud.tencent.com/document/product/400/7995",target:"_blank",rel:"noopener noreferrer"}},[t._v("SSL 证书购买流程"),e("OutboundLink")],1),t._v("，请根据您的实际情况进行购买相关证书。腾讯云为 Discuz! Q 站点提供免费 SSL 证书申请。详情请查看："),e("a",{attrs:{href:"https://cloud.tencent.com/document/product/400/6814",target:"_blank",rel:"noopener noreferrer"}},[t._v("域名型（DV）免费证书申请流程"),e("OutboundLink")],1)])])]),t._v(" "),e("ol",{attrs:{start:"2"}},[e("li",[t._v("单击【下一步】，Discuz! Q 将自行进行站点检查。如有报错等问题，可参考 "),e("a",{attrs:{href:"https://discuz.com/docs/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("常见问题"),e("OutboundLink")],1),t._v(" 进行排查处理。")]),t._v(" "),e("li",[t._v("Discuz! Q 检查完成后，需配置网站相关信息。如下图所示：")])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://main.qcloudimg.com/raw/8e3ac52669180620b946750787b50c95.png",alt:"img"}})]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("站点名称")]),t._v("：请输入您的站点名称信息，可自定义。")]),t._v(" "),e("li",[e("strong",[t._v("MySQL 服务器地址")]),t._v("：请输入您的 MySQL 服务器地址。")]),t._v(" "),e("li",[e("strong",[t._v("数据库名称")]),t._v("：请输入您的数据库名称。")]),t._v(" "),e("li",[e("strong",[t._v("MySQL 用户名")]),t._v("：请输入您的数据库用户名。")]),t._v(" "),e("li",[e("strong",[t._v("MySQL 密码")]),t._v("：请输入您的数据库密码。")]),t._v(" "),e("li",[e("strong",[t._v("表前缀")]),t._v("：可选，可自定义数据库表前缀名称。默认不填。")]),t._v(" "),e("li",[e("strong",[t._v("设置管理员用户名")]),t._v("：请输入您 Discuz! Q 站点的管理员用户名。")]),t._v(" "),e("li",[e("strong",[t._v("设置管理员密码")]),t._v("：请输入您 Discuz! Q 站点的管理员密码。")]),t._v(" "),e("li",[e("strong",[t._v("管理员密码确认")]),t._v("：请再次输入您 Discuz! Q 站点的管理员密码。")])]),t._v(" "),e("ol",{attrs:{start:"4"}},[e("li",[t._v("单击【下一步】。即可完成 DIscuz！Q 的安装部署。")])]),t._v(" "),e("h4",{attrs:{id:"步骤五-添加计划任务"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步骤五-添加计划任务"}},[t._v("#")]),t._v(" 步骤五：添加计划任务")]),t._v(" "),e("p",[t._v("为保证 DIscuz！Q 站点功能的正常使用。请添加一个每分钟运行一次的计划任务，脚本内容为以下命令。其中的 "),e("code",[t._v("PHP文件目录")]),t._v(" 和 "),e("code",[t._v("网站主目录")]),t._v(" 请按自己的情况做相应调整。")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("c:\\<PHP文件目录>\\php.exe c:\\<网站主目录>\\disco schedule:run\n")])])]),e("h3",{attrs:{id:"iis"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#iis"}},[t._v("#")]),t._v(" IIS")]),t._v(" "),e("h4",{attrs:{id:"操作场景-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#操作场景-3"}},[t._v("#")]),t._v(" 操作场景")]),t._v(" "),e("p",[t._v("本文档将指导您如何在已安装 IIS 服务的 Windows Server 服务器上安装部署 Discuz! Q。")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("ul",[e("li",[t._v("若您已知晓如何安装部署 Discuz! Q，您可以直接"),e("a",{attrs:{href:"https://discuzq.icu",target:"_blank",rel:"noopener noreferrer"}},[t._v("单击此处"),e("OutboundLink")],1),t._v("下载 Discuz! Q 进行安装部署。")]),t._v(" "),e("li",[t._v("本文档以 PHP 7.3.1  版本为例。系统为 Windows Server 2016 。")])])]),t._v(" "),e("h4",{attrs:{id:"前提条件-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#前提条件-3"}},[t._v("#")]),t._v(" 前提条件")]),t._v(" "),e("ul",[e("li",[t._v("服务器已安装的 PHP 版本为 7.2 及以上(暂不推荐使用7.4)，数据库使用 MySQL 5.7.9 版本以上或 MariaDB 10.2 以上。")]),t._v(" "),e("li",[t._v("已成功登录 Windows Server 服务器。")])]),t._v(" "),e("h4",{attrs:{id:"操作步骤-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#操作步骤-3"}},[t._v("#")]),t._v(" 操作步骤")]),t._v(" "),e("h4",{attrs:{id:"步骤一-配置php-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步骤一-配置php-3"}},[t._v("#")]),t._v(" 步骤一：配置PHP")]),t._v(" "),e("h4",{attrs:{id:"安装扩展"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装扩展"}},[t._v("#")]),t._v(" 安装扩展")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("ul",[e("li",[t._v("Discuz! Q 依赖于 "),e("code",[t._v("BCMath")]),t._v(" "),e("code",[t._v("Ctype")]),t._v(" "),e("code",[t._v("Curl")]),t._v(" "),e("code",[t._v("Dom")]),t._v(" "),e("code",[t._v("Fileinfo")]),t._v(" "),e("code",[t._v("GD")]),t._v(" "),e("code",[t._v("JSON")]),t._v(" "),e("code",[t._v("Mbstring")]),t._v(" "),e("code",[t._v("Exif")]),t._v(" "),e("code",[t._v("OpenSSL")]),t._v(" "),e("code",[t._v("PDO")]),t._v(" "),e("code",[t._v("PDO_mysql")]),t._v(" "),e("code",[t._v("Tokenizer")]),t._v(" "),e("code",[t._v("XML")]),t._v(" "),e("code",[t._v("Zip")]),t._v("扩展插件，在 PHP 中需开启以上扩展。")]),t._v(" "),e("li",[t._v("以下操作因为系统版本，软件版本的不同，操作上会有所差异，请根据您的具体情况进行开启对应函数，以下操作仅提供示例。")])])]),t._v(" "),e("h4",{attrs:{id:"开启-exif-扩展"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#开启-exif-扩展"}},[t._v("#")]),t._v(" 开启 "),e("code",[t._v("exif")]),t._v(" 扩展:")]),t._v(" "),e("ol",[e("li",[t._v("您可以使用文本编辑器，打开 "),e("code",[t._v("php.ini")]),t._v(" 文件。")]),t._v(" "),e("li",[t._v("编辑 "),e("code",[t._v("php.ini")]),t._v(" 文件，去掉以下字段前面的 "),e("code",[t._v(";")]),t._v(" 分号，并保存 "),e("code",[t._v("php.ini")]),t._v(" 文件。如下：")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("extension=exif    \nexif.encode_unicode = ISO-8859-15\nexif.decode_unicode_motorola = UCS-2BE\nexif.decode_unicode_intel    = UCS-2LE\nexif.encode_jis =\nexif.decode_jis_motorola = JIS\nexif.decode_jis_intel    = JIS=\n")])])]),e("ol",{attrs:{start:"3"}},[e("li",[t._v("重启  IIS 服务。")])]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("重启后如果扩展不生效，请确保 "),e("code",[t._v("php")]),t._v(" 目录下 "),e("code",[t._v("ext")]),t._v(" 文件夹具备对应扩展文件，"),e("code",[t._v("extension_dir")]),t._v("指向"),e("code",[t._v("ext")]),t._v("文件夹并已去掉字段前"),e("code",[t._v(";")]),t._v("分号。如："),e("code",[t._v('extension_dir = "C:\\Program Files\\php-7.3.1\\ext"')]),t._v("。")])]),t._v(" "),e("h4",{attrs:{id:"启用-php-函数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启用-php-函数"}},[t._v("#")]),t._v(" 启用 PHP 函数")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("ul",[e("li",[t._v("Discuz！Q 依赖于 "),e("code",[t._v("symlink")]),t._v("、"),e("code",[t._v("readlink")]),t._v("、"),e("code",[t._v("putenv")]),t._v("、"),e("code",[t._v("realpath")]),t._v("、"),e("code",[t._v("shell_exec")]),t._v(" 函数，在 PHP 中需开启以上函数。")]),t._v(" "),e("li",[t._v("以下操作因为系统版本，软件版本的不同，操作上和命令上会有所差异，请根据您的具体情况开启对应函数 ，以下操作仅提供示例。")])])]),t._v(" "),e("ol",[e("li",[t._v("打开并编辑 "),e("code",[t._v("php.ini")]),t._v("文件。查找 "),e("code",[t._v("disable_functions")]),t._v(" 字段，并删除禁用掉的 "),e("code",[t._v("symlink")]),t._v("、"),e("code",[t._v("readlink")]),t._v("、 "),e("code",[t._v("putenv")]),t._v("、 "),e("code",[t._v("realpath")]),t._v("、"),e("code",[t._v("shell_exec")]),t._v("  函数。如下所示：")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("disable_functions = passthru,exec,system,chroot,chgrp,chown,shell_exec,proc_open,proc_get_status,popen,ini_alter,ini_restore,dl,openlog,syslog,popepassthru,stream_socket_server\n")])])]),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("如果"),e("code",[t._v("disable_functions")]),t._v("字段中已删除对应函数，可忽略此操作。")])]),t._v(" "),e("ol",{attrs:{start:"2"}},[e("li",[t._v("保存 "),e("code",[t._v("php.ini")]),t._v("文件并重启  IIS 服务。")])]),t._v(" "),e("h4",{attrs:{id:"步骤二-配置-iis"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步骤二-配置-iis"}},[t._v("#")]),t._v(" 步骤二：配置 IIS")]),t._v(" "),e("h4",{attrs:{id:"配置url-rewrite扩展模块"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置url-rewrite扩展模块"}},[t._v("#")]),t._v(" 配置URL Rewrite扩展模块：")]),t._v(" "),e("ol",[e("li",[t._v("单击【"),e("a",{attrs:{href:"https://go.microsoft.com/?linkid=9722532",target:"_blank",rel:"noopener noreferrer"}},[t._v("下载URL Rewrite扩展"),e("OutboundLink")],1),t._v("】并安装该 URL Rewrite 扩展模块。")])]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("安装该 URL Rewrite 扩展模块时，如果报错 "),e("code",[t._v("IIS Version 7.0 or greater is required to install IIS URLRewrite Module 2.")]),t._v(" ,请 "),e("a",{attrs:{href:"https://www.iis.net/downloads/microsoft/url-rewrite",target:"_blank",rel:"noopener noreferrer"}},[t._v("下载最新版本"),e("OutboundLink")],1),t._v(" 进行安装。")])]),t._v(" "),e("ol",{attrs:{start:"2"}},[e("li",[e("p",[t._v("安装完成后，在IIS管理器网站主页，单击 【URL重写】 如下图所示：\n"),e("img",{attrs:{src:"https://main.qcloudimg.com/raw/6220e8205cc1af0924324ad1ffa3dcb2.png",alt:""}})])]),t._v(" "),e("li",[e("p",[t._v("添加以下规则。")])])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('<rule name="root_location_rewrite" stopProcessing="true">\n  <match ignoreCase="false" url="."/>\n  <conditions logicalGrouping="MatchAll">\n    <add ignoreCase="false" input="{REQUEST_FILENAME}" matchType="IsFile" negate="true"/>\n    <add ignoreCase="false" input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true"/>\n  </conditions>\n  <action appendQueryString="true" type="Rewrite" url="index.php?{QUERY_STRING}"/>\n</rule>\n<rule name="default_file_rewrite" stopProcessing="true">\n  <match ignoreCase="false" url="^$"/>\n  <action appendQueryString="true" type="Rewrite" url="index.php?{QUERY_STRING}"/>\n</rule>\n')])])]),e("h4",{attrs:{id:"配置默认文档"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置默认文档"}},[t._v("#")]),t._v(" 配置默认文档")]),t._v(" "),e("ol",[e("li",[t._v("在 IIS 管理器中，单击【默认文档】，如下图所示：")])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://main.qcloudimg.com/raw/f9f4237286d3aa018735e94e1d1b8b78.png",alt:""}})]),t._v(" "),e("ol",{attrs:{start:"2"}},[e("li",[t._v("在默认文档页，单击【添加】按钮，并设置名称为【index.php】的默认文档名称。如下图所示：")])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://main.qcloudimg.com/raw/d12d040be6b53006b03da65552d11df0.png",alt:""}})]),t._v(" "),e("ol",{attrs:{start:"3"}},[e("li",[t._v("单击【确认】，即可完成配置默认文档操作。")])]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("IIS 管理器默认会添加 "),e("code",[t._v("index.html")]),t._v(" 的默认文档，请检查是否已添加。未添加可参考以上操作进行添加，否则将可能导致多次刷新页面时报 403 错误。")])]),t._v(" "),e("h4",{attrs:{id:"步骤三-下载并解压-discuz-q-安装包-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步骤三-下载并解压-discuz-q-安装包-3"}},[t._v("#")]),t._v(" 步骤三：下载并解压 Discuz！Q 安装包")]),t._v(" "),e("ol",[e("li",[t._v("您可以通过服务器中的浏览器使用下载地址 "),e("code",[t._v("https://discuzq.icu")]),t._v(" 下载 Discuz！Q 安装包，并解压至于网站目录。如下图所示：")])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://main.qcloudimg.com/raw/76ee5b35922ea2ca9241b94734571ada.png",alt:""}})]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("该网站目录仅提供示例，请根据自己的环境与实际需求将 Discuz！Q 安装包解压至对应文件夹，一般为"),e("code",[t._v("wwwroot")]),t._v("目录下。")])]),t._v(" "),e("h4",{attrs:{id:"步骤四-配置运行目录"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步骤四-配置运行目录"}},[t._v("#")]),t._v(" 步骤四：配置运行目录")]),t._v(" "),e("ol",[e("li",[t._v("在IIS管理器选择需要部署的网站名称，右击选择管理网站，并单击【高级设置】。")]),t._v(" "),e("li",[t._v("在网站高级设置窗口中，选择【物理路径】，选择 Discuz！Q 部署文件的网站目录下的 "),e("code",[t._v("public")]),t._v(" 子目录。如下图所示：")])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://main.qcloudimg.com/raw/adaee39db63c8226ed3693f3654cb5f1.png",alt:""}})]),t._v(" "),e("ol",{attrs:{start:"3"}},[e("li",[t._v("单击【确定】。")])]),t._v(" "),e("h4",{attrs:{id:"步骤五-初始化安装-discuz-q-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步骤五-初始化安装-discuz-q-2"}},[t._v("#")]),t._v(" 步骤五：初始化安装 Discuz! Q")]),t._v(" "),e("ol",[e("li",[t._v("打开本地浏览器，访问 "),e("code",[t._v("http://<绑定网站的域名名称>/install")]),t._v(" 。如下图所示：")])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://main.qcloudimg.com/raw/d571ed3234565af42c508666b827ca37.png",alt:""}})]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("ul",[e("li",[t._v("站点如需部署 SSL 证书，使用 HTTPS 协议进行站点访问。请在以下操作之前部署安装 SSL 证书，并使用 "),e("code",[t._v("https://<绑定网站的域名名称>/dl.php")]),t._v("  进行访问。部署安装 SSL 证书详情操作请参考： "),e("a",{attrs:{href:"https://cloud.tencent.com/document/product/400/35225",target:"_blank",rel:"noopener noreferrer"}},[t._v("IIS 服务器证书安装"),e("OutboundLink")],1),t._v("。")]),t._v(" "),e("li",[t._v("如需购买 SSL 证书，可参考 "),e("a",{attrs:{href:"https://cloud.tencent.com/document/product/400/7995",target:"_blank",rel:"noopener noreferrer"}},[t._v("SSL 证书购买流程"),e("OutboundLink")],1),t._v("，请根据您的实际情况进行购买相关证书。腾讯云为 Discuz! Q 站点提供免费 SSL 证书申请。详情请查看："),e("a",{attrs:{href:"https://cloud.tencent.com/document/product/400/6814",target:"_blank",rel:"noopener noreferrer"}},[t._v("域名型（DV）免费证书申请流程"),e("OutboundLink")],1)])])]),t._v(" "),e("ol",{attrs:{start:"2"}},[e("li",[e("p",[t._v("单击【下一步】，Discuz! Q 将自行进行站点检查，如有报错等问题，可参考 "),e("a",{attrs:{href:"https://discuz.com/docs/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("常见问题"),e("OutboundLink")],1),t._v(" 进行排查处理。")])]),t._v(" "),e("li",[e("p",[t._v("Discuz! Q 检查完成后，需配置网站相关信息。如下图所示：")])])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://main.qcloudimg.com/raw/8e3ac52669180620b946750787b50c95.png",alt:""}})]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("站点名称")]),t._v("：请输入您的站点名称信息，可自定义。")]),t._v(" "),e("li",[e("strong",[t._v("MySQL 服务器地址")]),t._v("：请输入您的 MySQL 服务器地址。")]),t._v(" "),e("li",[e("strong",[t._v("数据库名称")]),t._v("：请输入您的数据库名称。")]),t._v(" "),e("li",[e("strong",[t._v("MySQL 用户名")]),t._v("：请输入您的数据库用户名。")]),t._v(" "),e("li",[e("strong",[t._v("MySQL 密码")]),t._v("：请输入您的数据库密码。")]),t._v(" "),e("li",[e("strong",[t._v("表前缀")]),t._v("：可选，可自定义数据库表前缀名称。默认不填。")]),t._v(" "),e("li",[e("strong",[t._v("设置管理员用户名")]),t._v("：请输入您 Discuz! Q 站点的管理员用户名。")]),t._v(" "),e("li",[e("strong",[t._v("设置管理员密码")]),t._v("：请输入您 Discuz! Q 站点的管理员密码。")]),t._v(" "),e("li",[e("strong",[t._v("管理员密码确认")]),t._v("：请再次输入您 Discuz! Q 站点的管理员密码。")])]),t._v(" "),e("ol",{attrs:{start:"4"}},[e("li",[t._v("单击【下一步】。即可完成 DIscuz！Q 的安装部署。")])]),t._v(" "),e("h4",{attrs:{id:"步骤七-添加计划任务-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步骤七-添加计划任务-2"}},[t._v("#")]),t._v(" 步骤七：添加计划任务")]),t._v(" "),e("p",[t._v("为保证 DIscuz！Q 站点功能的正常使用。请添加一个每分钟运行一次的计划任务，脚本内容为以下命令。其中的 "),e("code",[t._v("PHP文件目录")]),t._v(" 和 "),e("code",[t._v("网站主目录")]),t._v(" 请按自己的情况做相应调整。")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("c:\\<PHP文件目录>\\php.exe c:\\<网站主目录>\\disco schedule:run\n")])])]),e("h2",{attrs:{id:"基于宝塔-推荐"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#基于宝塔-推荐"}},[t._v("#")]),t._v(" 基于宝塔（推荐）")]),t._v(" "),e("h4",{attrs:{id:"操作场景-4"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#操作场景-4"}},[t._v("#")]),t._v(" 操作场景")]),t._v(" "),e("p",[t._v("本文档将指导您如何在已安装宝塔面板的 Windows Server  服务器上安装部署 DIscuz！Q。")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("ul",[e("li",[t._v("若您已知晓如何安装部署 Discuz! Q，您可以直接"),e("a",{attrs:{href:"https://discuzq.icu",target:"_blank",rel:"noopener noreferrer"}},[t._v("单击此处"),e("OutboundLink")],1),t._v("下载 Discuz! Q 进行安装部署。")]),t._v(" "),e("li",[t._v("本文档以宝塔面板 6.9.0 版本、Windows Server 2012 R2 Datacenter  系统为例。")])])]),t._v(" "),e("h4",{attrs:{id:"前提条件-4"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#前提条件-4"}},[t._v("#")]),t._v(" 前提条件")]),t._v(" "),e("ul",[e("li",[t._v("宝塔面板安装的 PHP 版本需为 7.2 及以上(暂不推荐使用7.4)，数据库需使用 MySQL 5.7.9 版本以上或 MariaDB 10.2 以上。")]),t._v(" "),e("li",[t._v("已成功登录宝塔控制台。")])]),t._v(" "),e("h4",{attrs:{id:"操作步骤-4"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#操作步骤-4"}},[t._v("#")]),t._v(" 操作步骤")]),t._v(" "),e("h4",{attrs:{id:"步骤一-配置php-4"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步骤一-配置php-4"}},[t._v("#")]),t._v(" 步骤一：配置PHP")]),t._v(" "),e("h4",{attrs:{id:"安装扩展-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装扩展-2"}},[t._v("#")]),t._v(" 安装扩展")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("Discuz！Q 依赖于 "),e("code",[t._v("fileinfo")]),t._v(" 和 "),e("code",[t._v("exif")]),t._v(" 两个扩展运行，部署前需对 PHP 进行相关配置。以下操作将指导您安装 "),e("code",[t._v("fileinfo")]),t._v(" 和 "),e("code",[t._v("exif")]),t._v(" 扩展。")])]),t._v(" "),e("ol",[e("li",[t._v("在宝塔控制台中，单击【软件管理】->【已安装】，查找已安装的 PHP 软件。如下图所示：")])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://main.qcloudimg.com/raw/399e2a061911e109100b023dd13c3fe2.png",alt:""}})]),t._v(" "),e("ol",{attrs:{start:"2"}},[e("li",[t._v("单击选择需要为 Discuz！Q 使用的 PHP 软件名称（需为7.2及以上）。此处以 PHP-7.3 为例。")])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://main.qcloudimg.com/raw/5358b5ea9eab9ee50995a2fd22604802.png",alt:""}})]),t._v(" "),e("ol",{attrs:{start:"3"}},[e("li",[t._v("在弹出的 【php 管理】窗口中，单击【安装扩展】，进行安装扩展设置。如下图所示")])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://main.qcloudimg.com/raw/04e21462ea9525e6d9735da890e85d24.png",alt:""}})]),t._v(" "),e("ol",{attrs:{start:"4"}},[e("li",[t._v("选择【fileinfo】与【exif】，并单击【安装】。如下图所示：")])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://main.qcloudimg.com/raw/35c37af44765699060f45a2b3f672df5.png",alt:""}})]),t._v(" "),e("ol",{attrs:{start:"5"}},[e("li",[t._v("【php 管理】窗口中【fileinfo】与【exif】状态栏显示为"),e("img",{attrs:{src:"https://main.qcloudimg.com/raw/6afdf7dacebf13ae1615976c36da021f.png",alt:""}}),t._v("即为安装成功。")])]),t._v(" "),e("h4",{attrs:{id:"删除禁用函数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#删除禁用函数"}},[t._v("#")]),t._v(" 删除禁用函数")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("Discuz！Q 需删除禁用的函数 "),e("code",[t._v("putenv")]),t._v("、"),e("code",[t._v("readlink")]),t._v("、"),e("code",[t._v("symlink")]),t._v("、 "),e("code",[t._v("shell_exec")]),t._v("  ，部署前需对 PHP 进行相关配置。以下操作将指导您删除禁用函数 "),e("code",[t._v("putenv")]),t._v("、"),e("code",[t._v("readlink")]),t._v("、"),e("code",[t._v("symlink")]),t._v("、"),e("code",[t._v("shell_exec")]),t._v("  。")])]),t._v(" "),e("ol",[e("li",[t._v("在 【php 管理】窗口中，单击【禁用函数】，进入禁用函数设置页面。如下图所示：")])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://main.qcloudimg.com/raw/0c31e34664a77eeb07cc3a517b19dae3.png",alt:""}})]),t._v(" "),e("ol",{attrs:{start:"2"}},[e("li",[t._v("在函数列表中单击【删除】函数 "),e("code",[t._v("putenv")]),t._v("、"),e("code",[t._v("readlink")]),t._v("、"),e("code",[t._v("symlink")]),t._v("、"),e("code",[t._v("shell_exec")]),t._v("，即可删除禁用的函数。")])]),t._v(" "),e("h4",{attrs:{id:"配置-openssl"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置-openssl"}},[t._v("#")]),t._v(" 配置 openssl")]),t._v(" "),e("ol",[e("li",[t._v("在宝塔控制台中，单击【文件】->【新建】->【新建目录】。如下图所示：")])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://main.qcloudimg.com/raw/d2b196e23eae562815d29be8d41aeba2.png",alt:""}})]),t._v(" "),e("ol",{attrs:{start:"2"}},[e("li",[t._v("在弹出的【新建目录】窗口中，输入 "),e("code",[t._v("\\usr\\local\\ssl\\")]),t._v(" 创建目录，并单击【保存】。如下图所示：")])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://main.qcloudimg.com/raw/aa3b4790e87c775d2ec0cb6e0895f0a9.png",alt:""}})]),t._v(" "),e("ol",{attrs:{start:"3"}},[e("li",[t._v("在宝塔文件管理器地址栏中，输入 "),e("code",[t._v("C:/BtSoft/php/73/extras/ssl")]),t._v(" ，勾选 "),e("code",[t._v("openssl.cnf")]),t._v(" 文件，单击【剪切】。如下图所示：")])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://main.qcloudimg.com/raw/bbd8de8d633a7d6c4af63dbbf8e9f1b5.png",alt:""}})]),t._v(" "),e("ol",{attrs:{start:"4"}},[e("li",[t._v("在宝塔文件管理器地址栏中，输入刚创建的 "),e("code",[t._v("C:\\usr\\local\\ssl\\")]),t._v(" 目录 。单击【粘贴】。将 "),e("code",[t._v("openssl.cnf")]),t._v(" 文件放置在 "),e("code",[t._v("ssl")]),t._v("目录下。如下图所示：")])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://main.qcloudimg.com/raw/11f23ce7fd128bff9cbfb471a4f87316.png",alt:""}})]),t._v(" "),e("ol",{attrs:{start:"5"}},[e("li",[t._v("在宝塔文件管理器中，单击【远程下载】，在弹出的下载文件窗口中，输入以下信息。如下图所示：")])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://main.qcloudimg.com/raw/7dcafa6a0b1b89332663498973b38bd2.png",alt:""}})]),t._v(" "),e("ul",[e("li",[t._v("URL地址：请输入 "),e("code",[t._v("https://dl.discuz.chat/mirrors/cacert.pem")]),t._v(",以下载"),e("code",[t._v("cacert.pem")]),t._v("文件。")]),t._v(" "),e("li",[t._v("下载到：请输入 "),e("code",[t._v("C:")]),t._v("。")]),t._v(" "),e("li",[t._v("文件名："),e("code",[t._v("cacert.pem")]),t._v("，无需填写，系统将自动填充。")])]),t._v(" "),e("ol",{attrs:{start:"6"}},[e("li",[e("p",[t._v("单击【确定】。")])]),t._v(" "),e("li",[e("p",[t._v("在宝塔控制台中，单击【软件管理】->【已安装】，单击选择需要为 Discuz！Q 使用的 PHP 软件名称。")])]),t._v(" "),e("li",[e("p",[t._v("在弹出的【php管理】弹窗中，单击【配置文件】。并修改 PHP 配置文件，将 "),e("code",[t._v("curl.cainfo")]),t._v(" 和 "),e("code",[t._v("openssl.cafile")]),t._v(" 设置为 "),e("code",[t._v("C:\\cacert.pem")]),t._v("，并去掉前面的 "),e("code",[t._v(";")]),t._v(" 符号。配置信息请参考如下：")])])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("curl.cainfo=C:\\cacert.pem\nopenssl.cafile=C:\\cacert.pem\n")])])]),e("h4",{attrs:{id:"步骤二-创建站点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步骤二-创建站点"}},[t._v("#")]),t._v(" 步骤二：创建站点")]),t._v(" "),e("ol",[e("li",[t._v("在宝塔控制台中，单击【网站】->【添加站点】。如下图所示：")])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://main.qcloudimg.com/raw/55f6d21e8151713e07cb3b3371a008c2.png",alt:""}}),t._v("\n2. 在弹出的添加网站窗口中，输入相关配置信息。如下图所示：")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://main.qcloudimg.com/raw/ddea8e6c25e657a6ad23142cd48e9f8c.png",alt:""}})]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("域名")]),t._v("：输入绑定 Discuz！Q 域名。")])]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("确保绑定的域名已添加相关解析。如您的域名使用腾讯云 DNS 解析 DNSPod ，详情操作可参考："),e("a",{attrs:{href:"https://cloud.tencent.com/document/product/302/3446",target:"_blank",rel:"noopener noreferrer"}},[t._v("快速添加域名解析"),e("OutboundLink")],1),t._v("。")])]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("备注")]),t._v("：可选，可添加网站的备注信息。")]),t._v(" "),e("li",[e("strong",[t._v("根目录")]),t._v("：网站文件根目录。一般情况使用默认"),e("code",[t._v("C:/wwwroot")]),t._v("路径。")]),t._v(" "),e("li",[e("strong",[t._v("FTP")]),t._v("：可选，可创建 FTP 服务。默认不创建。")]),t._v(" "),e("li",[e("strong",[t._v("数据库")]),t._v("：可选，您可在您的服务器内创建数据库进行使用。也可以其他数据库,数据库类型需为 MySQL 5.7.9 版本以上或MariaDB 10.2 以上。如："),e("a",{attrs:{href:"https://cloud.tencent.com/product/cdb",target:"_blank",rel:"noopener noreferrer"}},[t._v("云数据库 TencentDB for MySQL"),e("OutboundLink")],1),t._v("。详情操作请参考："),e("a",{attrs:{href:"https://cloud.tencent.com/document/product/236",target:"_blank",rel:"noopener noreferrer"}},[t._v("云数据库 MySQL 产品文档"),e("OutboundLink")],1),t._v(" 。")])]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("如需在服务器内创建数据库进行使用，请选择【MySQL】,【utf8mb4】，并输入数据库用户名以及密码。")])]),t._v(" "),e("ul",[e("li",[t._v("程序类型：PHP，默认不可选。")]),t._v(" "),e("li",[t._v("PHP版本：请选择已配置完成的 PHP 版本。此处为 PHP-73。")]),t._v(" "),e("li",[t._v("网站分类：默认分类。可根据实际情况进行选择。")])]),t._v(" "),e("p",[t._v("3.单击【提交】。即可创建站点。")]),t._v(" "),e("h4",{attrs:{id:"步骤三-远程下载-discuz-q-部署文件压缩包"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步骤三-远程下载-discuz-q-部署文件压缩包"}},[t._v("#")]),t._v(" 步骤三：远程下载 DIscuz！Q 部署文件压缩包")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("单击已创建的 Discuz！Q 根目录路径，如下图所示：\n"),e("img",{attrs:{src:"https://main.qcloudimg.com/raw/2cb0cda984fd895e6b275986290ab7f8.png",alt:""}})])]),t._v(" "),e("li",[e("p",[t._v("在文件目录中，单击【远程下载】。在弹出的下载文件窗口中输入相关信息。如下图所示：")])])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://main.qcloudimg.com/raw/02a1d930d37a616f6470d460d1da1b42.png",alt:""}})]),t._v(" "),e("ul",[e("li",[t._v("URL地址：请输入 Discuz！Q 下载地址： "),e("code",[t._v("https://discuzq.icu")]),t._v("。")]),t._v(" "),e("li",[t._v("下载到：默认不修改。")]),t._v(" "),e("li",[t._v("文件名：默认不修改，输入下载路径后将自动进行填充。")])]),t._v(" "),e("ol",{attrs:{start:"3"}},[e("li",[t._v("单击【确认】。系统将自行下载 DIscuz！Q 部署文件，请耐心等待。")])]),t._v(" "),e("h4",{attrs:{id:"步骤五-解压-discuz-q-部署文件压缩包"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步骤五-解压-discuz-q-部署文件压缩包"}},[t._v("#")]),t._v(" 步骤五：解压  DIscuz！Q 部署文件压缩包")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("选择已下载好 Discuz！Q 部署文件压缩包，并单击【解压】。如下图所示：\n"),e("img",{attrs:{src:"https://main.qcloudimg.com/raw/a081ffd726de5bb6322404db1e28ba8d.png",alt:""}})])]),t._v(" "),e("li",[e("p",[t._v("在弹出的解压文件窗口中，单击【解压】。如下图所示：")])])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://main.qcloudimg.com/raw/71ae81ac89cf9b178ba2deb8e29c72c1.png",alt:""}})]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("文件解压成功后，可自行删除 Discuz！Q 部署文件压缩包，不影响 Discuz！Q 的正常使用。")])]),t._v(" "),e("h4",{attrs:{id:"步骤六-修改网站配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步骤六-修改网站配置"}},[t._v("#")]),t._v(" 步骤六：修改网站配置")]),t._v(" "),e("h5",{attrs:{id:"修改运行环境"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#修改运行环境"}},[t._v("#")]),t._v(" 修改运行环境")]),t._v(" "),e("ol",[e("li",[t._v("在宝塔控制台中，单击【网站】，并选择已创建 Discuz！Q  站点，单击【设置】。如下图所示：")])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://main.qcloudimg.com/raw/db50d6b8b321727e62058dd7737c67fe.png",alt:""}})]),t._v(" "),e("ol",{attrs:{start:"2"}},[e("li",[t._v("在弹出的站点修改窗口中，单击【网站目录】，进行网站目录相关设置。如下图所示：")])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://main.qcloudimg.com/raw/31486b4566bdd0ea4037f61eb72ec587.png",alt:""}})]),t._v(" "),e("ol",{attrs:{start:"3"}},[e("li",[t._v("运行目录勾选"),e("code",[t._v("/public")]),t._v("。如下图所示:")])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://main.qcloudimg.com/raw/e80a52489b3de196d2bb4121d61d8c1a.png",alt:""}})]),t._v(" "),e("ol",{attrs:{start:"4"}},[e("li",[t._v("单击【保存】。")])]),t._v(" "),e("h5",{attrs:{id:"配置伪静态"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置伪静态"}},[t._v("#")]),t._v(" 配置伪静态")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("如果使用 "),e("code",[t._v("Apache")]),t._v("服务，此步操作无需配置；如果使用 "),e("code",[t._v("Nginx")]),t._v(" 服务，请按照如下进行设置伪静态。")])]),t._v(" "),e("ol",[e("li",[t._v("进入【网站】，单击刚才添加站点，操作栏处【设置】。")]),t._v(" "),e("li",[t._v("弹出的【站点修改】窗口中，单击【伪静态】，将以下内容复制粘贴进去，并单击【保存】。")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("location / {\n  try_files $uri $uri/ /index.php?$query_string;\n}\n")])])]),e("h5",{attrs:{id:"设置-gzip"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#设置-gzip"}},[t._v("#")]),t._v(" 设置 gzip")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("如果使用Apache服务，此步操作无需配置；如果使用 Nginx 服务，请按照如下进行设置 gzip。")])]),t._v(" "),e("ol",[e("li",[t._v("单击【软件商城】，并查找到您安装的 Nginx。")]),t._v(" "),e("li",[t._v("单击 Nginx 操作栏的【设置】。")]),t._v(" "),e("li",[t._v("在弹出的【nginx 管理】窗口中，单击【配置修改】。")]),t._v(" "),e("li",[t._v("在【配置修改】中查找到 "),e("code",[t._v("gzip_types")]),t._v(" 字段并在前端添加 "),e("code",[t._v("application/json")]),t._v(" 和末尾处添加 "),e("code",[t._v("application/vnd.api+json")]),t._v(" 代码。如下图所示：")])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://main.qcloudimg.com/raw/ebf3190907cd495ca22773c9c2c12e1f.png",alt:""}})]),t._v(" "),e("ol",{attrs:{start:"5"}},[e("li",[t._v("单击 【性能调整】，在 gzip 处选择【开启】。若已开启请忽略此步操作。")]),t._v(" "),e("li",[t._v("单击【保存】。重启 Nginx 服务。")])]),t._v(" "),e("p",[t._v("如果您使用的是 "),e("code",[t._v("IIS")]),t._v(" Web 服务，请单击站点修改窗口中【伪静态】，将以下内容复制粘贴进去，并单击【保存】。")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('<rule name="root_location_rewrite" stopProcessing="true">\n  <match ignoreCase="false" url="."/>\n  <conditions logicalGrouping="MatchAll">\n    <add ignoreCase="false" input="{REQUEST_FILENAME}" matchType="IsFile" negate="true"/>\n    <add ignoreCase="false" input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true"/>\n  </conditions>\n  <action appendQueryString="true" type="Rewrite" url="index.php?{QUERY_STRING}"/>\n</rule>\n<rule name="default_file_rewrite" stopProcessing="true">\n  <match ignoreCase="false" url="^$"/>\n  <action appendQueryString="true" type="Rewrite" url="index.php?{QUERY_STRING}"/>\n</rule>\n')])])]),e("h4",{attrs:{id:"步骤六-初始化安装-discuz-q"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步骤六-初始化安装-discuz-q"}},[t._v("#")]),t._v(" 步骤六：初始化安装 Discuz! Q")]),t._v(" "),e("ol",[e("li",[t._v("打开本地浏览器，访问 "),e("code",[t._v("http://<绑定网站的域名名称>/install")]),t._v(" 。如下图所示：")])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://main.qcloudimg.com/raw/d571ed3234565af42c508666b827ca37.png",alt:""}})]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("ul",[e("li",[t._v("站点如需部署 SSL 证书，使用 HTTPS 协议进行站点访问。请在以下操作之前部署安装 SSL 证书，并使用"),e("code",[t._v("https://<绑定网站的域名名称>/dl.php")]),t._v("  进行访问。部署安装 SSL 证书详情操作请参考： "),e("a",{attrs:{href:"https://cloud.tencent.com/document/product/400/50874",target:"_blank",rel:"noopener noreferrer"}},[t._v("宝塔服务器证书安装"),e("OutboundLink")],1),t._v("。")]),t._v(" "),e("li",[t._v("如需购买 SSL 证书，可参考 "),e("a",{attrs:{href:"https://cloud.tencent.com/document/product/400/7995",target:"_blank",rel:"noopener noreferrer"}},[t._v("SSL 证书购买流程"),e("OutboundLink")],1),t._v("，请根据您的实际情况进行购买相关证书。腾讯云为 Discuz! Q 站点提供免费 SSL 证书申请。详情请查看："),e("a",{attrs:{href:"https://cloud.tencent.com/document/product/400/6814",target:"_blank",rel:"noopener noreferrer"}},[t._v("域名型（DV）免费证书申请流程"),e("OutboundLink")],1),t._v("。")])])]),t._v(" "),e("ol",{attrs:{start:"2"}},[e("li",[e("p",[t._v("单击【下一步】，Discuz! Q 将自行进行站点检查。如有报错等问题，请查看 "),e("a",{attrs:{href:"https://discuz.com/docs/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("常见问题"),e("OutboundLink")],1),t._v(" 进行排查处理。")])]),t._v(" "),e("li",[e("p",[t._v("Discuz! Q 检查完成后，需配置网站相关信息。如下图所示：")])])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://main.qcloudimg.com/raw/8e3ac52669180620b946750787b50c95.png",alt:""}})]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("站点名称")]),t._v("：请输入您的站点名称信息，可自定义。")]),t._v(" "),e("li",[e("strong",[t._v("MySQL 服务器地址")]),t._v("：请输入您的 MySQL 服务器地址，如您使用宝塔创建的服务器本地数据库，请输入"),e("code",[t._v("127.0.0.1")]),t._v("即可。")]),t._v(" "),e("li",[e("strong",[t._v("数据库名称")]),t._v("：请输入您的数据库名称。如您使用宝塔创建的服务器本地数据库，可登录服务器的宝塔控制台，【数据库】进行查看。")]),t._v(" "),e("li",[e("strong",[t._v("MySQL 用户名")]),t._v("：请输入您的数据库用户名。如您使用宝塔创建的服务器本地数据库，可登录服务器的宝塔控制台，【数据库】进行查看。")]),t._v(" "),e("li",[e("strong",[t._v("MySQL 密码")]),t._v("：请输入您的数据库密码。如您使用宝塔创建的服务器本地数据库，可登录服务器的宝塔控制台，【数据库】进行查看。")]),t._v(" "),e("li",[e("strong",[t._v("表前缀")]),t._v("：可选，可自定义数据库表前缀名称。默认不填。")]),t._v(" "),e("li",[e("strong",[t._v("设置管理员用户名")]),t._v("：请输入您 Discuz! Q 站点的管理员用户名。")]),t._v(" "),e("li",[e("strong",[t._v("设置管理员密码")]),t._v("：请输入您 Discuz! Q 站点的管理员密码。")]),t._v(" "),e("li",[e("strong",[t._v("管理员密码确认")]),t._v("：请再次输入您 Discuz! Q 站点的管理员密码。")])]),t._v(" "),e("ol",{attrs:{start:"4"}},[e("li",[t._v("单击【下一步】。即可完成 DIscuz！Q 的安装部署。")])]),t._v(" "),e("h4",{attrs:{id:"步骤七-添加计划任务-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#步骤七-添加计划任务-3"}},[t._v("#")]),t._v(" 步骤七：添加计划任务")]),t._v(" "),e("p",[t._v("为保证 DIscuz！Q 站点功能的正常使用。您还需要在宝塔面板中添加计划任务。")]),t._v(" "),e("ol",[e("li",[t._v("登录宝塔控制台，单击【计划任务】，进入计划任务页面，并选择与填写相关信息。如下图所示：")])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://main.qcloudimg.com/raw/1ee9cba4a3d9ed05b79f388992903f51.png",alt:""}})]),t._v(" "),e("ul",[e("li",[t._v("任务类型：选择 Shell 脚本。")]),t._v(" "),e("li",[t._v("任务名称：可自定义，建议填写【Discuz！Q 计划任务】 便于区分。")]),t._v(" "),e("li",[t._v("执行周期：选择【N分钟】，并填写【1】分钟。")]),t._v(" "),e("li",[t._v("脚本内容：请输入以下命令,命令【网站主目录】请按实际情况做相应调整。")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("c:\\btsoft\\php\\<PHP版本目录>\\php.exe c:\\wwwroot\\<网站主目录>\\disco schedule:run\n")])])]),e("ol",{attrs:{start:"2"}},[e("li",[t._v("单击【添加任务】。")])])])}),[],!1,null,null,null);e.default=a.exports}}]);