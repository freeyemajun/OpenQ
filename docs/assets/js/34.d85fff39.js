(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{222:function(t,s,a){"use strict";a.r(s);var e=a(6),c=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"docker容器部署方式升级"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker容器部署方式升级"}},[t._v("#")]),t._v(" Docker容器部署方式升级")]),t._v(" "),s("h2",[t._v("概述")]),t._v(" "),s("p",[t._v("本文档将指导您如何升级使用 Docker 部署方式的 Discuz! Q 。")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("执行此操作前，请先将数据保存到 Docker 容器外部，再进行升级。在升级时原 Docker 容器需先停止并删除，未保存数据到外部将导致数据丢失，请确保已将数据保存到外部。")])]),t._v(" "),s("h2",[t._v("前提条件")]),t._v(" "),s("ul",[s("li",[t._v("已使用 Docker 部署方式成功部署 Discuz! Q。")]),t._v(" "),s("li",[t._v("已将数据保存到了 Docker 容器外部。")])]),t._v(" "),s("h2",[t._v("操作指南")]),t._v(" "),s("p",[t._v("1.在升级前，需要将原容器先停止并删除，请在终端中输入以下命令：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("docker stop <容器 ID>\ndocker rm <容器 ID>\n")])])]),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("其中的<容器 ID>，可以通过在终端中输入"),s("code",[t._v("docker ps")]),t._v(" 命令查询。")])]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v("使用以下命令下载最新版本镜像文件:")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("docker pull ccr.ccs.tencentyun.com/discuzq/dzq:latest\n")])])]),s("ol",{attrs:{start:"3"}},[s("li",[t._v("重新启动 Docker 容器即可。")])]),t._v(" "),s("p",[t._v("如果需要执行升级文档中要求的其它升级命令，请先使用以下命令登录容器：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("docker exec -it <容器 ID> /bin/bash\n")])])]),s("p",[t._v("即可执行升级文档中要求的相关的命令，例如：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v(" cd /var/www/discuz\n php disco migrate --force\n")])])]),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("如果您想对容器进行其他配置，详情请查看："),s("a",{attrs:{href:"https://discuz.com/docs/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.html#%E5%AE%B9%E5%99%A8%E7%9A%84%E6%9B%B4%E5%A4%9A%E9%85%8D%E7%BD%AE%E8%AF%B4%E6%98%8E",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker 容器配置说明"),s("OutboundLink")],1),t._v("。")])])])}),[],!1,null,null,null);s.default=c.exports}}]);