<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>常见问题 | DiscuzQ 安装文档</title>
    <meta name="generator" content="VuePress 1.9.10">
    <script>
      document.addEventListener("DOMContentLoaded", function(){
        console.log("ready");
        var isChrome = /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);
        if (window.location.hash && isChrome) {
            setTimeout(function () {
                var hash = window.location.hash;
                var element_to_scroll_to = document.getElementById(decodeURI(hash.substr(1)));
                element_to_scroll_to.scrollIntoView();
            }, 300);
        }
      });
</script>
    <meta name="description" content="">
    
    <link rel="preload" href="/docs/assets/css/0.styles.1dac2540.css" as="style"><link rel="preload" href="/docs/assets/js/app.4a94bff3.js" as="script"><link rel="preload" href="/docs/assets/js/2.65b3c0ea.js" as="script"><link rel="preload" href="/docs/assets/js/1.93f47670.js" as="script"><link rel="preload" href="/docs/assets/js/30.778c4be0.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.e303b1fe.js"><link rel="prefetch" href="/docs/assets/js/11.caa9adf9.js"><link rel="prefetch" href="/docs/assets/js/12.f47f63d5.js"><link rel="prefetch" href="/docs/assets/js/13.93dc81ea.js"><link rel="prefetch" href="/docs/assets/js/14.704d1a26.js"><link rel="prefetch" href="/docs/assets/js/15.2330e6dc.js"><link rel="prefetch" href="/docs/assets/js/16.6aaa40a5.js"><link rel="prefetch" href="/docs/assets/js/17.e32a5229.js"><link rel="prefetch" href="/docs/assets/js/18.1fa05986.js"><link rel="prefetch" href="/docs/assets/js/19.53f57844.js"><link rel="prefetch" href="/docs/assets/js/20.864577f6.js"><link rel="prefetch" href="/docs/assets/js/21.b4e831fa.js"><link rel="prefetch" href="/docs/assets/js/22.243f8c8f.js"><link rel="prefetch" href="/docs/assets/js/23.7addb889.js"><link rel="prefetch" href="/docs/assets/js/24.ef0496a7.js"><link rel="prefetch" href="/docs/assets/js/25.89b549f4.js"><link rel="prefetch" href="/docs/assets/js/26.0a614c82.js"><link rel="prefetch" href="/docs/assets/js/27.c737aa41.js"><link rel="prefetch" href="/docs/assets/js/28.1e6bd7b4.js"><link rel="prefetch" href="/docs/assets/js/29.3f95441b.js"><link rel="prefetch" href="/docs/assets/js/3.640e72c3.js"><link rel="prefetch" href="/docs/assets/js/31.7bb18d07.js"><link rel="prefetch" href="/docs/assets/js/32.ace851f7.js"><link rel="prefetch" href="/docs/assets/js/33.80a8af0e.js"><link rel="prefetch" href="/docs/assets/js/34.d85fff39.js"><link rel="prefetch" href="/docs/assets/js/35.3adf9801.js"><link rel="prefetch" href="/docs/assets/js/36.9a107e60.js"><link rel="prefetch" href="/docs/assets/js/37.6d5ed231.js"><link rel="prefetch" href="/docs/assets/js/38.d4773946.js"><link rel="prefetch" href="/docs/assets/js/39.1f25f111.js"><link rel="prefetch" href="/docs/assets/js/4.6fcba847.js"><link rel="prefetch" href="/docs/assets/js/40.a7c7edfd.js"><link rel="prefetch" href="/docs/assets/js/41.6c906a58.js"><link rel="prefetch" href="/docs/assets/js/42.19af8c9b.js"><link rel="prefetch" href="/docs/assets/js/43.c3501ba2.js"><link rel="prefetch" href="/docs/assets/js/44.095b6352.js"><link rel="prefetch" href="/docs/assets/js/45.f712c735.js"><link rel="prefetch" href="/docs/assets/js/46.ea4a5f90.js"><link rel="prefetch" href="/docs/assets/js/47.4c923c28.js"><link rel="prefetch" href="/docs/assets/js/48.a2893909.js"><link rel="prefetch" href="/docs/assets/js/49.4c0fc68d.js"><link rel="prefetch" href="/docs/assets/js/5.5755b19e.js"><link rel="prefetch" href="/docs/assets/js/50.a768c789.js"><link rel="prefetch" href="/docs/assets/js/51.9145a08d.js"><link rel="prefetch" href="/docs/assets/js/52.bea51864.js"><link rel="prefetch" href="/docs/assets/js/53.d24412c9.js"><link rel="prefetch" href="/docs/assets/js/54.cd9f37d4.js"><link rel="prefetch" href="/docs/assets/js/55.a856d50b.js"><link rel="prefetch" href="/docs/assets/js/56.b3072981.js"><link rel="prefetch" href="/docs/assets/js/57.e9c27eb6.js"><link rel="prefetch" href="/docs/assets/js/58.a94f49c6.js"><link rel="prefetch" href="/docs/assets/js/59.76707aea.js"><link rel="prefetch" href="/docs/assets/js/6.c1859e2f.js"><link rel="prefetch" href="/docs/assets/js/60.79251db4.js"><link rel="prefetch" href="/docs/assets/js/61.742230c8.js"><link rel="prefetch" href="/docs/assets/js/62.ca1bb933.js"><link rel="prefetch" href="/docs/assets/js/63.75830b2e.js"><link rel="prefetch" href="/docs/assets/js/64.243cb0d7.js"><link rel="prefetch" href="/docs/assets/js/7.d29ddd45.js"><link rel="prefetch" href="/docs/assets/js/vendors~docsearch.d97d6166.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.1dac2540.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><!----> <span class="site-name">DiscuzQ 安装文档</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="https://discuzq.icu" target="_blank" rel="noopener noreferrer" class="nav-link external">
  返回
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="https://discuzq.icu" target="_blank" rel="noopener noreferrer" class="nav-link external">
  返回
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>安装</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>使用</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>配置</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>升级和转换</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>关于</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/关于/常见问题.html" class="active sidebar-link">常见问题</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="常见问题"><a href="#常见问题" class="header-anchor">#</a> 常见问题</h1> <h3 id="本页目录"><a href="#本页目录" class="header-anchor">#</a> 本页目录</h3> <ul><li><a href="https://discuzq.icu/docs/%E5%85%B3%E4%BA%8E/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.html#%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AEcdn%E8%A7%84%E5%88%99" target="_blank" rel="noopener noreferrer">如何配置CDN规则？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://discuzq.icu/docs/%E5%85%B3%E4%BA%8E/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.html#%E5%B0%8F%E5%86%85%E5%AD%98%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E5%AE%9D%E5%A1%94%E9%BB%98%E8%AE%A4%E5%AE%89%E8%A3%85%E7%9A%84-mysql-%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener noreferrer">小内存服务器上宝塔默认安装的 MySQL 如何配置？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://discuzq.icu/docs/%E5%85%B3%E4%BA%8E/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.html#windows%E4%B8%8B%E6%8F%90%E7%A4%BA-ssl-%E7%9B%B8%E5%85%B3%E5%87%BD%E6%95%B0%E4%B8%8D%E5%8F%AF%E7%94%A8%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3" target="_blank" rel="noopener noreferrer">Windows下提示 SSL 相关函数不可用如何解决？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://discuzq.icu/docs/%E5%85%B3%E4%BA%8E/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.html#windows%E4%B8%8B%E6%8F%90%E7%A4%BA-ca-%E6%A0%B9%E8%AF%81%E4%B9%A6%E5%BA%93%E9%94%99%E8%AF%AF%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3" target="_blank" rel="noopener noreferrer"> Windows下提示 CA 根证书库错误如何解决？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://discuzq.icu/docs/%E5%85%B3%E4%BA%8E/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.html#web-%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%85%B6%E5%AE%83%E6%8E%A8%E8%8D%90%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener noreferrer">Web 服务器其它推荐配置？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://discuzq.icu/docs/%E5%85%B3%E4%BA%8E/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.html#%E5%A6%82%E4%BD%95%E5%9F%BA%E4%BA%8E-laravel-valet-%E8%BF%90%E8%A1%8C-discuz-q" target="_blank" rel="noopener noreferrer">如何基于 Laravel Valet 运行 Discuz! Q ？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://discuzq.icu/docs/%E5%85%B3%E4%BA%8E/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.html#%E5%A6%82%E4%BD%95%E6%9B%B4%E6%94%B9%E5%9F%9F%E5%90%8D" target="_blank" rel="noopener noreferrer">如何更改域名？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://discuzq.icu/docs/%E5%85%B3%E4%BA%8E/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.html#%E5%8E%9F%E6%9D%A5-http-%E7%9A%84%E7%AB%99-%E6%94%B9%E6%88%90-https-%E4%B9%8B%E5%90%8E-%E8%BF%98%E6%9C%89%E9%83%A8%E5%88%86%E8%B5%84%E6%BA%90%E4%BD%BF%E7%94%A8%E5%8E%9F%E6%9D%A5%E7%9A%84-http-%E9%93%BE%E6%8E%A5" target="_blank" rel="noopener noreferrer">原来 http 的站，改成 https 之后，还有部分资源使用原来的 http 链接？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://discuzq.icu/docs/%E5%85%B3%E4%BA%8E/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.html#discuz-q-%E5%A6%82%E4%BD%95%E6%95%B0%E6%8D%AE%E5%A4%87%E4%BB%BD" target="_blank" rel="noopener noreferrer">Discuz! Q 如何数据备份？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://discuzq.icu/docs/%E5%85%B3%E4%BA%8E/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.html#%E5%AE%B9%E5%99%A8%E7%9A%84%E6%9B%B4%E5%A4%9A%E9%85%8D%E7%BD%AE%E8%AF%B4%E6%98%8E" target="_blank" rel="noopener noreferrer">容器的更多配置说明？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://discuzq.icu/docs/%E5%85%B3%E4%BA%8E/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.html#%E5%AE%89%E8%A3%85%E5%90%8E-%E9%A6%96%E5%B1%8F%E6%97%A0%E9%99%90%E5%8A%A0%E8%BD%BD%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3" target="_blank" rel="noopener noreferrer">安装后，首屏无限加载如何解决?<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://discuzq.icu/docs/%E5%85%B3%E4%BA%8E/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.html#%E5%AE%89%E8%A3%85%E5%90%8E%E5%9B%BE%E7%89%87%E4%B8%8D%E8%83%BD%E6%98%BE%E7%A4%BA-%E6%B2%A1%E4%BD%BF%E7%94%A8%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8-%E6%80%8E%E4%B9%88%E5%8A%9E" target="_blank" rel="noopener noreferrer">安装后图片不能显示(没使用对象存储)怎么办?<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://discuzq.icu/docs/%E5%85%B3%E4%BA%8E/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.html#discuz-q-%E5%8D%87%E7%BA%A7-v2-3-210202-%E7%89%88%E6%9C%AC%E5%90%8E-%E8%BF%9B%E8%A1%8C%E7%BA%A2%E8%93%9D%E4%B8%BB%E9%A2%98%E5%88%87%E6%8D%A2%E6%97%B6%E6%8A%A5%E9%94%99-warning-shell-exec-has-been-disabled-for-security-reasons-in-%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3" target="_blank" rel="noopener noreferrer">Discuz! Q 升级 v2.3.210202 版本后，进行红蓝主题切换时报错 <code>Warning: shell_exec() has been disabled for security reasons in</code> 如何解决?<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h4 id="如何配置cdn规则"><a href="#如何配置cdn规则" class="header-anchor">#</a> 如何配置CDN规则？</h4> <p>在腾讯云 CDN 添加域名的时候，请在【缓存配置】&gt; 【节点缓存过期配置】处增加以下两条规则：</p> <ul><li>规则类型为【文件目录】，内容设置为<code>/apiv3</code>，缓存选项选择【不缓存】。</li> <li>规则类型为【文件目录】，内容设置为<code>/api</code>，缓存选项选择【不缓存】。优先级调整为“最顶部”如下图所示：</li></ul> <p><img src="https://main.qcloudimg.com/raw/1bf841c2eefa53b525ae7955743920d1.png" alt=""></p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>若您使用 Discuz! Q 2.0 版本，无需设置 <code>/apiv3</code> 规则。</p></div> <h4 id="小内存服务器上宝塔默认安装的-mysql-如何配置"><a href="#小内存服务器上宝塔默认安装的-mysql-如何配置" class="header-anchor">#</a> 小内存服务器上宝塔默认安装的 MySQL 如何配置？</h4> <p>在小内存的服务器上(1G~2G)，宝塔上的默认 MySQL 配置占用了过多内存，可进行如下一些配置以优化 MySQL 内存占用：</p> <ul><li>在 MySQL 设置的 【性能调整】中，将优化方案选择为【1-2GB】。</li> <li>在 1GB 的服务器上，可以将【性能调整】页中的参数进一步调整：
<ul><li><code>innodb_buffer_pool_size</code> 可调整为 128 或 64。</li> <li><code>innodb_log_buffer_size</code> 可调整为 8。</li> <li><code>thread_cache_size</code> 可调整为 32。</li> <li><code>max_connections</code> 可调整为 32。</li></ul></li> <li>在 MySQL 设置的【配置修改】中，在<code>[mysqld]</code>处，下方加入一行<code>performance_schema = off</code>语句。</li></ul> <h4 id="windows下提示-ssl-相关函数不可用如何解决"><a href="#windows下提示-ssl-相关函数不可用如何解决" class="header-anchor">#</a> Windows下提示 SSL 相关函数不可用如何解决？</h4> <p>在 Windows 下，PHP的 SSL 相关函数有可能不可用，请按以下任一方法配置。(参考<a href="https://www.php.net/manual/en/openssl.installation.php" target="_blank" rel="noopener noreferrer">PHP的openssl安装文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>)</p> <p>首先，在您的 PHP 安装目录下，查找 <code>openssl.cnf</code> 文件。</p> <p><strong>方法一:</strong>
新建一个 <strong>系统</strong> 环境变量，变量名为 <code>OPENSSL_CONF</code>，变量值为上面找到的 <code>openssl.cnf</code> 文件的完整路径。之后退出您的控制面板程序(例如 phpstudy )再重新打开，然后重启 PHP  服务。</p> <p><strong>方法二：</strong></p> <ul><li>PHP 版本小于 7.4，建立目录 <code>c:\usr\local\ssl\</code> ，然后将 PHP 安装目录下找到的 <code>openssl.cnf</code> 文件复制过去。</li> <li>PHP 版本为 7.4 及以上, 64位版本，建立目录 <code>C:\Program Files\Common Files\SSL\</code>，将 <code>openssl.cnf</code> 文件复制过去。</li> <li>PHP版本为 7.4 及以上, 32位版本，建立目录 <code>C:\Program Files (x86)\Common Files\SSL\</code>，将 <code>openssl.cnf</code> 文件复制过去。</li></ul> <h4 id="windows下提示-ca-根证书库错误如何解决"><a href="#windows下提示-ca-根证书库错误如何解决" class="header-anchor">#</a> Windows下提示 CA 根证书库错误如何解决？</h4> <p>CA根证书错误会导致 PHP 无法验证SSL证书，从而无法正确调用腾讯云API、微信API 等。解决方案如下：</p> <ul><li>下载 <a href="https://dl.discuz.chat/mirrors/cacert.pem" target="_blank" rel="noopener noreferrer">根证书文件<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，保存为 <code>C:\cacert.pem</code></li> <li>修改<code>php.ini</code>，修改其中的以下两行内容，并去掉前面的<code>;</code>符号。如下所示：</li></ul> <div class="language- extra-class"><pre class="language-text"><code>curl.cainfo=c:\cacert.pem
openssl.cafile=c:\cacert.pem
</code></pre></div><h4 id="web-服务器其它推荐配置"><a href="#web-服务器其它推荐配置" class="header-anchor">#</a> Web 服务器其它推荐配置？</h4> <p>除了安装文档中的配置，您可以参考以下配置进一步优化系统运行：</p> <p><strong>启动 gzip 压缩</strong></p> <p>Discuz! Q 在运行中，浏览器会请求的文本类文档包含以下类型：<code>text/html</code>, <code>text/css</code>, <code>application/vnd.api+json</code>, <code>application/x-javascript</code>，建议在 Web 服务器中打开这些文档类型的 gzip 压缩，以减少下载的数据量。经测算，在 Nginx 中打开 gzip 压缩，并将压缩等级设置为 2 的时候，下载的平均数据量是打开压缩前的 1/3 左右。Nginx 中的配置参考如下：</p> <div class="language- extra-class"><pre class="language-text"><code>  gzip on;
  gzip_min_length 1024;
  gzip_types text/css application/x-javascript application/javascript application/vnd.api+json;
  gzip_disable &quot;MSIE [1-6]\.&quot;;
  gzip_comp_level 2;
</code></pre></div><p><strong>获取客户的真实IP</strong></p> <p>在 Discuz! Q 中，因安全原因，只使用 <code>$_SERVER['REMOTE_ADDR']</code> 这一种方式获取客户的 IP 地址。请正确配置您的服务器，以保证 Discuz! Q 可以正确获取到客户的 IP 地址。</p> <ul><li>如果您是通过您的服务器上的公网 IP 地址直接对外提供服务，则无需额外配置。</li> <li>如果您使用腾讯云的负载均衡器(CLB) 与腾讯云的云服务器(CVM)的配置，无论配置的是 4 层还是 7 层负载均衡，都无需额外配置。</li> <li>如果您使用自建的负载均衡，或其它的负载均衡，则默认只能获取到负载均衡的IP，无法获取到用户的真实IP，请按<a href="https://cloud.tencent.com/document/product/214/3728" target="_blank" rel="noopener noreferrer">此文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>配置，获取用户的真实IP。</li></ul> <p><strong>启用 opcache</strong></p> <p>在<code>php.ini</code>中启用 opcache，可提高 PHP 代码的运行效率，参考配置如下</p> <div class="language- extra-class"><pre class="language-text"><code>[opcache]
opcache.enable = 1
opcache.memory_consumption = 256
opcache.interned_strings_buffer = 8
opcache.max_accelerated_files = 10000
opcache.revalidate_freq = 240
opcache.fast_shutdown = 1
opcache.enable_cli = 0
opcache.file_cache = /tmp
opcache.error_log = log/opcache_error.log
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>设置成功后，每次更新Discuz! Q，需要**重启 php-fpm **，新的代码才能生效。</p></div> <h4 id="如何基于-laravel-valet-运行-discuz-q"><a href="#如何基于-laravel-valet-运行-discuz-q" class="header-anchor">#</a> 如何基于 Laravel Valet 运行 Discuz! Q ？</h4> <p>假设本地的<code>park</code>目录是 <code>~/sites</code>，通过 composer 或离线安装将 <code>Discuz! Q</code>安装到 <code>~/sites/discuz</code> 目录之后，将<a href="https://dl.discuz.chat/valet/LocalValetDriver.php" target="_blank" rel="noopener noreferrer">此文件<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 下载并保存到 <code>/sites/discuz</code> 目录下，之后就可以直接访问： <code>http://discuz.test</code>。</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>数据库需要另外安装。</p></div> <h4 id="如何更改域名"><a href="#如何更改域名" class="header-anchor">#</a> 如何更改域名？</h4> <p>您只需要删除 <code>storage/cache/data</code> 目录中的内容与 <code>storage/formatter</code> 目录中的内容即可。</p> <div class="custom-block danger"><p class="custom-block-title">DANGER</p> <p>请不要将目录删除，只删除其中的内容。</p></div> <h4 id="原来-http-的站-改成-https-之后-还有部分资源使用原来的-http-链接"><a href="#原来-http-的站-改成-https-之后-还有部分资源使用原来的-http-链接" class="header-anchor">#</a> 原来 http 的站，改成 https 之后，还有部分资源使用原来的 http 链接？</h4> <p>您只需要删除 <code>storage/cache/data</code> 目录中的内容与 <code>storage/formatter</code> 目录中的内容即可。</p> <div class="custom-block danger"><p class="custom-block-title">DANGER</p> <p>请不要将目录删除，只删除其中的内容。</p></div> <h4 id="discuz-q-如何数据备份"><a href="#discuz-q-如何数据备份" class="header-anchor">#</a> Discuz! Q 如何数据备份？</h4> <p>如需备份 Discuz! Q，请备份以下内容：</p> <ol><li>数据库。</li> <li>config 目录。</li> <li>storage 目录。</li></ol> <h4 id="容器的更多配置说明"><a href="#容器的更多配置说明" class="header-anchor">#</a> 容器的更多配置说明？</h4> <p><strong>如何将数据保存到容器外部</strong>
本容器支持以下三个外部映射目录：</p> <ul><li>数据库文件，映射到 <code>/var/lib/mysqldb/</code>。</li> <li>Discuz! Q的配置与存储目录，映射到 <code>/var/lib/discuz/</code>。</li> <li>SSL证书文件，映射到 <code>/etc/nginx/certs/</code>，其中<strong>要求</strong>存在两个文件 <code>discuz.crt</code> 和 <code>discuz.key</code>。如果不使用SSL协议，请不要配置此目录，并且不映射 443 端口。</li></ul> <p>因此，如果如果您想长期使用容器来运行 Discuz! Q，建议在启动容器的时候加入这三个参数进行映射。</p> <p>例如数据库文件，在本地(宿主机)上，想保存到 <code>/data/mysql-data</code>，Discuz! Q的运行数据，保存到 <code>/data/discuz</code>，SSL证书文件放在 <code>/data/certs/discuz.crt</code> 和 <code>/data/certs/discuz.key</code>，同时不想对外开放 80 端口，那启动容器的命令就是：</p> <div class="language- extra-class"><pre class="language-text"><code>docker run -d --restart=always \
  -p 443:443 \
  -v /data/discuz:/var/lib/discuz \
  -v /data/mysql-data:/var/lib/mysqldb \
  -v /data/certs:/etc/nginx/certs \
  ccr.ccs.tencentyun.com/discuzq/dzq:latest
</code></pre></div><p>启动之后，访问 <code>https://&lt;域名&gt;/install</code> 就可以开始安装，并正常使用。</p> <div class="custom-block danger"><p class="custom-block-title">DANGER</p> <p>请一定要访问外部用户将要访问的协议( <code>http://</code> 或 <code>https://</code> ) 加 <strong>域名</strong> 加 <code>/install</code> 进行安装，否则会导致自动获取的站点 URL 配置不正确，站点工作不正常。</p></div> <p><strong>基于容器的升级</strong></p> <p>只要将数据保存到了容器外部，容器就可以升级。在升级前，要将原容器先停止并删除(执行此命令时，一定要确保自己已经将数据保存到了容器外部)。</p> <div class="language- extra-class"><pre class="language-text"><code>docker stop &lt;容器 ID&gt;
docker rm &lt;容器 ID&gt;
</code></pre></div><p>其中的<code>&lt;容器 ID&gt;</code>，可以通过 <code>docker ps</code> 命令看到。
然后用以下命令下载最新版本镜像：</p> <div class="language- extra-class"><pre class="language-text"><code>docker pull ccr.ccs.tencentyun.com/discuzq/dzq:latest
</code></pre></div><p>再使用上次启动相同的命令重新启动即可。</p> <p>如果需要执行升级文档中要求的其它升级命令，请先登录容器</p> <div class="language- extra-class"><pre class="language-text"><code>docker exec -it &lt;容器 ID&gt; /bin/bash
</code></pre></div><p>然后就可以执行升级文档中要求的相关的命令，例如：</p> <div class="language- extra-class"><pre class="language-text"><code> cd /var/www/discuz
 php disco migrate --force
</code></pre></div><p><strong>基于容器的一些其它配置</strong></p> <ul><li>如果您想对 mysql 进行管理，可选择以下两种方法之一：
<ul><li>登录进容器，用 mysql 命令进行管理 <code>docker exec -it &lt;容器id&gt; /bin/bash</code>。</li> <li>将 3306 端口暴露到外面，通过外部工具连上去进行管理。在启动时，加一个 <code>-p 3306:3306</code>。</li></ul></li> <li>如果您想通过外部的负载均衡进行 SSL 卸载，可开放容器的 80 端口，不开放 443 端口即可。</li> <li>Nginx 的配置文件，位于容器的 <code>/etc/nginx/nginx.conf</code> 下，如果需要修改，可通过 <code>-v</code> 映射自己的配置文件，覆盖这个文件。
<ul><li>例如您本地的配置文件为 <code>/data/nginx.conf</code> ，可以在上面的启动命令中，加入映射： <code>-v /data/nginx.conf:/etc/nginx/nginx.conf</code>，即可覆盖系统原来内置的 Nginx 配置文件。</li></ul></li> <li><code>php-fpm</code> 的配置文件，位于容器的 <code>/etc/php/7.2/fpm/pool.d/www.conf</code>，也可同样映射修改。</li> <li>控制 PHP 上传大小的文件，位于容器的 <code>/etc/php/7.2/fpm/conf.d/30-upload-size.ini</code>, 当前设置为20M，可同样映射修改。</li></ul> <h4 id="安装后-首屏无限加载如何解决"><a href="#安装后-首屏无限加载如何解决" class="header-anchor">#</a> 安装后，首屏无限加载如何解决?</h4> <p>如果遇到这样的情况，请清空您的浏览器缓存再重试。如果您了解浏览器调试工具，也可以只清空 <code>LocalStorage</code>之后再进行重试。</p> <h4 id="安装后图片不能显示-没使用对象存储-怎么办"><a href="#安装后图片不能显示-没使用对象存储-怎么办" class="header-anchor">#</a> 安装后图片不能显示(没使用对象存储)怎么办?</h4> <p>请执行命令以下命令：</p> <div class="language- extra-class"><pre class="language-text"><code>ln -s 安装目录/storage/app/public 安装目录/public/storage
</code></pre></div><p>例如站点安装目录是：<code>/www/wwwroot/discuz.chat/discuz</code> ，那么这条命令就是</p> <div class="language- extra-class"><pre class="language-text"><code>ln -s /www/wwwroot/discuz.chat/discuz/storage/app/public /www/wwwroot/discuz.chat/discuz/public/storage
</code></pre></div><h4 id="discuz-q-升级-v2-3-210202-版本后-进行红蓝主题切换时报错-warning-shell-exec-has-been-disabled-for-security-reasons-in-如何解决"><a href="#discuz-q-升级-v2-3-210202-版本后-进行红蓝主题切换时报错-warning-shell-exec-has-been-disabled-for-security-reasons-in-如何解决" class="header-anchor">#</a> Discuz! Q 升级 v2.3.210202 版本后，进行红蓝主题切换时报错 <code>Warning: shell_exec() has been disabled for security reasons in</code> 如何解决?</h4> <p>如果您遇到这样的情况，您可以删除您 Discuz! Q 站点所使用的 PHP 版本中的禁用函数 <code>shell_exec</code> 进行解决。如果您的 Discuz! Q 站点是基于宝塔面板安装，您可以参考以下步骤：
以下操作以宝塔面板 7.5.1、 PHP 7.3 版本为例：</p> <ol><li>登录您 Discuz! Q 站点的宝塔面板。</li> <li>单击侧边栏【软件商店】，查找到您 Discuz! Q 站点所使用的 PHP 版本并单击【设置】。如下图所示：
<img src="https://main.qcloudimg.com/raw/a0c511911bec5a00e157cbeda55fdfa3.png" alt=""></li> <li>在弹出的&quot;php 管理&quot;窗口中，单击【禁用函数】。</li> <li>在禁用函数列表中，查找到 <code>shell_exec</code> 函并单击【删除】。如下图所示：
<img src="https://main.qcloudimg.com/raw/a253d88008f1b6051e8c58a7410ff098.png" alt=""></li> <li>重启 PHP 即可完成操作。</li></ol> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>若删除禁用函数 <code>shell_exec</code> 后，依旧无法正常切换使用。您可以将 Discuz! Q 站点目录下 <code>public_1</code> 目录中的 <code>skin.conf</code>文件复制并替换至 Discuz! Q 站点目录下的 <code>public</code> 目录，并重新进行尝试。</p></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/升级/站点接入 CDN.html" class="prev">
        站点接入 CDN
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/docs/assets/js/app.4a94bff3.js" defer></script><script src="/docs/assets/js/2.65b3c0ea.js" defer></script><script src="/docs/assets/js/1.93f47670.js" defer></script><script src="/docs/assets/js/30.778c4be0.js" defer></script>
  </body>
</html>
